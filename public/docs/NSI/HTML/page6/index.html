<!DOCTYPE html>




<html lang="en">

<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  
    
    serveur Flask
  
 | Allophysique</title>


<link href="https://fonts.googleapis.com/css?family=Oxygen|Oxygen+Mono:300,400,700" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Roboto+Condensed" rel="stylesheet"> 


<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>



<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.5.0/prism.min.js"></script>


<script async src="https://www.googletagmanager.com/gtag/js?id=UA-167114468-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-167114468-1');
</script>





<link rel="stylesheet" href="/book.min.757bde8284addd9205931692e0522a4e50ed085e00c44dff802d2fc8255c68ca.css">


<link rel="icon" href="/favicon.png" type="image/x-icon">


<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->

  

<div class="my-header-container">
<div class="my-site-header">
	<img src="/logo-site-b.svg" width = "150 px"/>
</div>

<div id="myHeader">
	<div class="titre">
	<h2><a href="/">Allophysique</a></h2>
    </div>
</div>
</div>



<script async>
window.onload = function () {
let container = document.getElementsByClassName("book-page");
let logodiv = document.getElementsByClassName("site-menu-before");
let header = document.getElementById("myHeader");
let screen = window.innerWidth;
let site_footer = document.querySelector(".site_footer");

try {
  
  let site_TOC = document.querySelector("#TableOfContents>ul");
  let newP = document.createElement('li');

  newP.textContent='Contenu de la page';
  site_TOC.appendChild(newP,null);
}
catch(err)
{
    console.log(err.message);
}




if (site_footer.parentNode != document.body){
    let father = site_footer.parentNode;
    let clone = site_footer.cloneNode;
    father.removeChild(site_footer);
    document.body.appendChild(clone);
}





if (screen<=850) {

  document.getElementsByClassName("my-site-header")[0].style.display="none";
} else {

	window.addEventListener("scroll", function(e) {
	let spectral=document.getElementById("spectral");
	if (screen>850 ){
		if (window.pageYOffset > 150) {
			header.classList.add("sticky");
    		if (container.lenght>0) {container[0].style.marginTop="65px";};
            logodiv[0].style.height="120px";
    	} else {
    	header.classList.remove("sticky");
    	if (container.lenght>0) {container[0].style.marginTop="0px";};
    	spectral.style.display="none";
        logodiv[0].style.height="220px";
    	}

    } 
    if (screen<=850) {

    	if (window.pageYOffset > 150){
    		spectral.style.display="block";
    	} else {
    		spectral.style.display="none";
    	}
    }
});
}


}





 
let chemin = window.location.pathname;
if (chemin.search('NSI')>-1) {
baniere=document.querySelector("#myHeader");


let linkBox = document.createElement('div');
linkBox.classList.add('linkBox');
let newH = document.createElement('a');
newH.innerHTML='<a href="/docs/NSI_1/NSI_index/index.html">NSI</a>';

newH.classList.add('nsi');

linkBox.appendChild(newH);
baniere.appendChild(linkBox); 
}
</script>

<style>
  #myHeader{
    display:flex;
    flex-direction: row-reverse;
  }
  #myHeader>.titre{
    width:80%;
    min-width:300px;
    text-align: left;

    
  }
  .linkBox{
    margin:10px;
    padding-top:10px;
    background-color: pink;
    
    min-width:50px;

  }
  .isn{
     
    
  }
</style>



</head>

<body>
  <input type="checkbox" style="display: none" id="menu-control" />
  <main class="flex container">

    <aside class="book-menu fixed">
      
<nav role="navigation">

<div class="site-menu-before" style="height:220px; display:block;" >
<img src="/logo-site.svg" id="spectral" height="50%" style="display:none;">	

</div>



    
  
  
  

  <style>
  nav ul a[href$="\2f docs\2fNSI\2fHTML\2fpage6\2f "] {
      color: #004ed0;
  }
  </style>

<ul>
<li>
<p><a href="/"><strong>Accueil</strong></a></p>
</li>
<li>
<p><a href="/docs/SNT_2nde/SNT_index/"><strong>SNT secondes</strong></a></p>
</li>
<li>
<p><a href="/docs/NSI_1/NSI_index/"><strong>NSI 1ere</strong></a></p>
</li>
<li>
<p><a href="/docs/NSI/NSI_index/"><strong>NSI Term</strong></a></p>
</li>
<li>
<p><a href="/docs/PC_2nde/PC_index/"><strong>Physique Chimie 2nde</strong></a></p>
</li>
<li>
<p><a href="/docs/PC_1ere/PC_index/"><strong>Physique 1ere Spé</strong></a></p>
</li>
<li>
<p><a href="/docs/esf/esf_index/"><strong>ESF</strong></a></p>
</li>
<li>
<p><a href="/docs/python/index_python_D/"><strong>Python debutant</strong></a></p>
</li>
<li>
<p><a href="/docs/python/index_python/"><strong>Python avancé</strong></a></p>
</li>
<li>
<p><a href="/docs/techno/index_microcontroleurs/"><strong>Techno</strong></a></p>
</li>
<li>
<p><a href="/posts/"><strong>Posts</strong></a></p>
</li>
<li>
<p><a href="/docs/contact/simple-contact-form/"><strong>Contact</strong></a></p>
</li>
</ul>





</nav>



  
<script>
(function() {
  var menu = document.querySelector('aside.book-menu nav')
  addEventListener('beforeunload', function(event) {
    localStorage.setItem('menu.scrollTop', menu.scrollTop)
  });
  menu.scrollTop = localStorage.getItem('menu.scrollTop')
})()
</script>



    </aside>

    <div class="book-page">
      <header class="align-center justify-between book-header">

  <label for="menu-control">
    <img src="/svg/menu.svg" alt="Menu" />
  </label>
  <strong>
  
    
    serveur Flask
  
</strong>
</header>

      
<article class="markdown"><h1 id="flask">Flask</h1>
<p>Flask est une <em>bibliothèque</em> python fournissant les outils pour faire fonctionner un serveur web.</p>
<!-- raw HTML omitted -->
<p>L’architecture Modèle-Vue-Contrôleur est composée de trois entités distinctes, chacune ayant son propre rôle:</p>
<ul>
<li>Le <strong>contrôleur</strong>: gère le fonctionnement du site Web. Le programme est écrit en python.</li>
<li>Les <strong>vues</strong>: cette partie se concentre sur l&rsquo;affichage, et a pour rôle d&rsquo;assembler le code HTML issu du <em>template</em>. Dans une <em>vue</em>, on peut mettre en oeuvre des algorithmes écrits en python. La <em>vue</em> va partager des variables avec les <em>templates</em>.</li>
<li>Les <strong>templates</strong>: c&rsquo;est le modèle de la page HTML qui sera utilisée par la <em>vue</em> pour générer la page HTML envoyée au client. Cette page peut être personnalisée selon les variables partagées avec la vue. C&rsquo;est grâce à certaines parties écrites en langage <em>JINJA2</em>, dans le corps du script du <em>template</em> que la substitution des éléments HTML sera réalisée. Un peu comme un <em>texte à trous</em>.</li>
</ul>
<p><a href="https://lesmathsduyeti.fr/fr/lycee/nsi-premiere/interactions-client-serveur-flask/">lien vers explications</a></p>
<h1 id="structure-du-projet">Structure du projet</h1>
<p>TP inspiré de <a href="https://qkzk.xyz/docs/nsi/cours_premiere/ihm_web/flask/">https://qkzk.xyz/docs/nsi/cours_premiere/ihm_web/flask/</a></p>
<p>Créez dans vos <em>Documents</em> un dossier <em>serveur_form</em>.</p>
<p>Créez les sous-dossiers <em>templates, static, et images,</em> comme sur l&rsquo;arborescence suivante:</p>
<pre tabindex="0"><code>Documents/serveur_form
/
|- main.py
|- templates/ 
    |- form.html
    |- result.html
|- static/
    |- style.css
</code></pre><h1 id="fichier-serveur">fichier serveur</h1>
<ul>
<li>Ouvrir un editeur Python (Spyder par exemple)</li>
<li><strong>créez un fichier Python “main.py”</strong> (ce fichier devra être sauvegardé dans le répertoire “serveur_form” précédemment créé).
Saisissez le code suivant dans le fichier “main.py”</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">from</span> <span style="color:#111">flask</span> <span style="color:#f92672">import</span> <span style="color:#111">Flask</span><span style="color:#111">,</span> <span style="color:#111">render_template</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#111">app</span> <span style="color:#f92672">=</span> <span style="color:#111">Flask</span><span style="color:#111">(</span><span style="color:#111">__name__</span><span style="color:#111">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75af00">@app</span><span style="color:#f92672">.</span><span style="color:#111">route</span><span style="color:#111">(</span><span style="color:#d88200">&#39;/&#39;</span><span style="color:#111">)</span>
</span></span><span style="display:flex;"><span><span style="color:#00a8c8">def</span> <span style="color:#75af00">form</span><span style="color:#111">():</span>
</span></span><span style="display:flex;"><span>  <span style="color:#00a8c8">return</span> <span style="color:#d88200">&#34;&lt;p&gt;Tout fonctionne parfaitement&lt;/p&gt;&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#111">app</span><span style="color:#f92672">.</span><span style="color:#111">run</span><span style="color:#111">(</span><span style="color:#111">debug</span><span style="color:#f92672">=</span><span style="color:#00a8c8">True</span><span style="color:#111">)</span>
</span></span></code></pre></div><p>Ce fichier <code>main.py</code> contient les <em>vues</em>, et lance le <em>contrôleur</em> lorsqu&rsquo;il est executé.</p>
<ul>
<li>
<p><strong>Executer le programme ci-dessus</strong></p>
</li>
<li>
<p><strong>ouvrez votre navigateur web</strong> et tapez dans la <strong>barre d’adresse “localhost:5000”</strong></p>
</li>
</ul>
<p>Vous devriez voir la phrase “Tout fonctionne parfaitement” s’afficher dans votre navigateur.</p>
<p>notre serveur et notre client se trouvent sur la même machine, avec le “localhost”, on indique au navigateur que le serveur web se trouve sur le même ordinateur que lui (on parle de machine locale).
La barre d’adresse doit être renseignée avec l’adresse du serveur web: <code>http://127.0.0.1:5000</code> ou bien <code>http://localhost:5000</code></p>
<p>En exécutant le programme Python ci-dessus, le framework Flask a lancé un serveur web. Ce serveur web attend des requêtes HTTP sur le port 5000. En ouvrant un navigateur web et en tapant “localhost:5000”, nous faisons une requête HTTP.</p>
<p>Cette requête demande au serveur de lui retourner la ressource située à la racine du site Web.
Le serveur web fourni avec Flask répond à cette requête HTTP en envoyant une page web contenant uniquement <code>&lt;p&gt;Tout fonctionne parfaitement&lt;/p&gt;</code>. C&rsquo;est ce qui est retourné par la fonction <code>index</code> et le groupe de lignes:</p>
<div class="highlight"><pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75af00">@app</span><span style="color:#f92672">.</span><span style="color:#111">route</span><span style="color:#111">(</span><span style="color:#d88200">&#39;/&#39;</span><span style="color:#111">)</span>
</span></span><span style="display:flex;"><span><span style="color:#00a8c8">def</span> <span style="color:#75af00">form</span><span style="color:#111">():</span>
</span></span><span style="display:flex;"><span>  <span style="color:#00a8c8">return</span> <span style="color:#d88200">&#34;&lt;p&gt;Tout fonctionne parfaitement&lt;/p&gt;&#34;</span>
</span></span></code></pre></div><h1 id="la-page-du-formulaire">La page du formulaire</h1>
<p>Dans le dossier <em>templates</em>, vous allez créer la page de formulaire <em>form.html</em></p>
<div class="highlight"><pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span><span style="color:#75715e">&lt;!doctype html&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#111">&lt;</span><span style="color:#f92672">html</span> <span style="color:#75af00">lang</span><span style="color:#f92672">=</span><span style="color:#d88200">&#34;fr&#34;</span><span style="color:#111">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#111">&lt;</span><span style="color:#f92672">head</span><span style="color:#111">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#111">&lt;</span><span style="color:#f92672">meta</span> <span style="color:#75af00">charset</span><span style="color:#f92672">=</span><span style="color:#d88200">&#34;utf-8&#34;</span><span style="color:#111">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#111">&lt;</span><span style="color:#f92672">title</span><span style="color:#111">&gt;</span>Le formulaire<span style="color:#111">&lt;/</span><span style="color:#f92672">title</span><span style="color:#111">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#111">&lt;/</span><span style="color:#f92672">head</span><span style="color:#111">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#111">&lt;</span><span style="color:#f92672">body</span><span style="color:#111">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#111">&lt;</span><span style="color:#f92672">form</span> <span style="color:#75af00">action</span><span style="color:#f92672">=</span><span style="color:#d88200">&#34;http://localhost:5000/result&#34;</span> <span style="color:#75af00">method</span><span style="color:#f92672">=</span><span style="color:#d88200">&#34;post&#34;</span><span style="color:#111">&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#111">&lt;</span><span style="color:#f92672">label</span><span style="color:#111">&gt;</span>Nom<span style="color:#111">&lt;/</span><span style="color:#f92672">label</span><span style="color:#111">&gt;</span> : <span style="color:#111">&lt;</span><span style="color:#f92672">input</span> <span style="color:#75af00">type</span><span style="color:#f92672">=</span><span style="color:#d88200">&#34;text&#34;</span> <span style="color:#75af00">name</span><span style="color:#f92672">=</span><span style="color:#d88200">&#34;nom&#34;</span> <span style="color:#111">/&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#111">&lt;</span><span style="color:#f92672">label</span><span style="color:#111">&gt;</span>Prénom<span style="color:#111">&lt;/</span><span style="color:#f92672">label</span><span style="color:#111">&gt;</span> : <span style="color:#111">&lt;</span><span style="color:#f92672">input</span> <span style="color:#75af00">type</span><span style="color:#f92672">=</span><span style="color:#d88200">&#34;text&#34;</span> <span style="color:#75af00">name</span><span style="color:#f92672">=</span><span style="color:#d88200">&#34;prenom&#34;</span> <span style="color:#111">/&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#111">&lt;</span><span style="color:#f92672">input</span> <span style="color:#75af00">type</span><span style="color:#f92672">=</span><span style="color:#d88200">&#34;submit&#34;</span> <span style="color:#75af00">value</span><span style="color:#f92672">=</span><span style="color:#d88200">&#34;Envoyer&#34;</span> <span style="color:#111">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#111">&lt;/</span><span style="color:#f92672">form</span><span style="color:#111">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#111">&lt;/</span><span style="color:#f92672">body</span><span style="color:#111">&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#111">&lt;/</span><span style="color:#f92672">html</span><span style="color:#111">&gt;</span>
</span></span></code></pre></div><p>Celui-ci contiendra les éléments <em>input</em> de type <em>text</em> et nommés <em>nom</em> et <em>prenom</em>, ainsi qu&rsquo;un bouton pour envoyer les données du formulaire.</p>
<p>Le formulaire utilisera la méthode <em>POST</em> pour envoyer les données. Celles-ci vont parvenir à la page <em>resul</em>.</p>
<h1 id="la-page-resulthtml">La page result.html</h1>
<p>Saisir le script HTML suivant dans le fichier <code>result.html</code> du dossier <em>templates</em>:</p>
<div class="highlight"><pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span><span style="color:#75715e">&lt;!doctype html&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#111">&lt;</span><span style="color:#f92672">html</span> <span style="color:#75af00">lang</span><span style="color:#f92672">=</span><span style="color:#d88200">&#34;fr&#34;</span><span style="color:#111">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#111">&lt;</span><span style="color:#f92672">head</span><span style="color:#111">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#111">&lt;</span><span style="color:#f92672">meta</span> <span style="color:#75af00">charset</span><span style="color:#f92672">=</span><span style="color:#d88200">&#34;utf-8&#34;</span><span style="color:#111">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#111">&lt;</span><span style="color:#f92672">title</span><span style="color:#111">&gt;</span>Résultat<span style="color:#111">&lt;/</span><span style="color:#f92672">title</span><span style="color:#111">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#111">&lt;/</span><span style="color:#f92672">head</span><span style="color:#111">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#111">&lt;</span><span style="color:#f92672">body</span><span style="color:#111">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#111">&lt;</span><span style="color:#f92672">p</span><span style="color:#111">&gt;</span>Bonjour {{prenom}} {{nom}}, j&#39;espère que vous allez bien.<span style="color:#111">&lt;/</span><span style="color:#f92672">p</span><span style="color:#111">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#111">&lt;/</span><span style="color:#f92672">body</span><span style="color:#111">&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#111">&lt;/</span><span style="color:#f92672">html</span><span style="color:#111">&gt;</span>
</span></span></code></pre></div><p>Cette requête POST sera envoyée à l’URL “http://localhost:5000/result” (voir l’attribut “action”). Les données saisies dans le formulaire seront envoyées au serveur par l’intermédiaire de cette requête.</p>
<p>En réponse à la requête POST, le serveur renvoie une page HTML créée à partir du template resultat.html et des paramètres nom et prenom.</p>
<p>Vous remarquerez que cette page contient des éléments d&rsquo;un autre langage: <code>{{prenom}} {{nom}}</code>. Il s&rsquo;agit d&rsquo;instructions en Jinja2, un langage serveur comme PHP.
Ce langage est executé côté serveur et il génère des bouts de script HTML AVANT que la page ne soit retournée au client.</p>
<p>Ici, ce seront les contenus de variables qui remplacent <code>{{prenom}} {{nom}}</code> dans le script HTML.</p>
<h1 id="fichier-mainpy">Fichier main.py</h1>
<p>Modifiez le fichier main.py comme suit :</p>
<div class="highlight"><pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">from</span> <span style="color:#111">flask</span> <span style="color:#f92672">import</span> <span style="color:#111">Flask</span><span style="color:#111">,</span> <span style="color:#111">render_template</span><span style="color:#111">,</span> <span style="color:#111">request</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#111">app</span> <span style="color:#f92672">=</span> <span style="color:#111">Flask</span><span style="color:#111">(</span><span style="color:#111">__name__</span><span style="color:#111">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75af00">@app</span><span style="color:#f92672">.</span><span style="color:#111">route</span><span style="color:#111">(</span><span style="color:#d88200">&#39;/&#39;</span><span style="color:#111">)</span>
</span></span><span style="display:flex;"><span><span style="color:#00a8c8">def</span> <span style="color:#75af00">form</span><span style="color:#111">():</span>
</span></span><span style="display:flex;"><span>  <span style="color:#00a8c8">return</span> <span style="color:#111">render_template</span><span style="color:#111">(</span><span style="color:#d88200">&#39;form.html&#39;</span><span style="color:#111">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75af00">@app</span><span style="color:#f92672">.</span><span style="color:#111">route</span><span style="color:#111">(</span><span style="color:#d88200">&#39;/result&#39;</span><span style="color:#111">,</span><span style="color:#111">methods</span> <span style="color:#f92672">=</span> <span style="color:#111">[</span><span style="color:#d88200">&#39;POST&#39;</span><span style="color:#111">])</span>
</span></span><span style="display:flex;"><span><span style="color:#00a8c8">def</span> <span style="color:#75af00">result</span><span style="color:#111">():</span>
</span></span><span style="display:flex;"><span>  <span style="color:#111">result</span> <span style="color:#f92672">=</span> <span style="color:#111">request</span><span style="color:#f92672">.</span><span style="color:#111">form</span>
</span></span><span style="display:flex;"><span>  <span style="color:#111">n</span> <span style="color:#f92672">=</span> <span style="color:#111">result</span><span style="color:#111">[</span><span style="color:#d88200">&#39;nom&#39;</span><span style="color:#111">]</span>
</span></span><span style="display:flex;"><span>  <span style="color:#111">p</span> <span style="color:#f92672">=</span> <span style="color:#111">result</span><span style="color:#111">[</span><span style="color:#d88200">&#39;prenom&#39;</span><span style="color:#111">]</span>
</span></span><span style="display:flex;"><span>  <span style="color:#00a8c8">return</span> <span style="color:#111">render_template</span><span style="color:#111">(</span><span style="color:#d88200">&#34;result.html&#34;</span><span style="color:#111">,</span> <span style="color:#111">nom</span><span style="color:#f92672">=</span><span style="color:#111">n</span><span style="color:#111">,</span> <span style="color:#111">prenom</span><span style="color:#f92672">=</span><span style="color:#111">p</span><span style="color:#111">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#111">app</span><span style="color:#f92672">.</span><span style="color:#111">run</span><span style="color:#111">(</span><span style="color:#111">debug</span><span style="color:#f92672">=</span><span style="color:#00a8c8">True</span><span style="color:#111">)</span>
</span></span></code></pre></div><p>Observez comment la fonction result va ouvrir la page <em>result.html</em> tout en passant les variables <em>nom</em> et <em>prenom</em>, par la méthode <strong>POST</strong>.</p>
<p>Observez également la ligne précédent la definition de la fonction <code>result</code>:
celle-ci contient un <em>décorateur</em> sur l&rsquo;objet <code>app</code> de la librairie <code>flask</code> qui précise le chemin vers le fichier à ouvrir: <em><code>/result.html</code></em></p>
<h1 id="moniteur-reseau">moniteur reseau</h1>
<h2 id="méthode-post">méthode POST</h2>
<p>Ouvrir le moniteur reseau. Utiliser la page de formulaire, envoyer les donées. Dans le moniteur, cliquer sur l&rsquo;onglet <em>header</em>.</p>
<ul>
<li>Observer l&rsquo;URL de la requête client. Celle-ci comporte-t-elle des paramètres query?</li>
<li>Observer le champ formulaire: contient-il l&rsquo;information des données transmises?</li>
</ul>
<!-- raw HTML omitted -->
<h2 id="méthode-get">méthode GET</h2>
<p>modifier ensuite le projet de la manière suivante:</p>
<ul>
<li>Dans “form.html”, la méthode POST sera remplacée par la méthode GET.</li>
<li>Dans le fichier “main.py” remplacer POST par GET, et utiliser <code>request.args</code> à la place de <code>request.form</code>.</li>
</ul>
<p>Ouvrir le moniteur reseau et recommencer l&rsquo;opération (transmettre les données par le formulaire):</p>
<ul>
<li>Observer l&rsquo;URL de la requête client. Celle-ci comporte-t-elle des paramètres query?</li>
<li>Observer le champ <em>Query String parameters</em>: contient-il l&rsquo;information des données transmises?</li>
</ul>
<h1 id="ajouter-une-feuille-de-style">Ajouter une feuille de style</h1>
<ul>
<li>Dans le dossier <em>static</em> à la racine du projet: ajouter votre feuille de style avec le nom <em>style.css</em>.</li>
<li>Dans le debut du fichier <em>main.py</em>, ajouter l&rsquo;import de <code>url_for</code> avec:</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">from</span> <span style="color:#111">flask</span> <span style="color:#f92672">import</span> <span style="color:#111">url_for</span>
</span></span></code></pre></div><ul>
<li>Dans le fichier <em>form.html</em>, entre les balises <code>&lt;head&gt; et &lt;/head&gt;</code>, ajouter:</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span><span style="color:#111">&lt;</span><span style="color:#f92672">link</span> <span style="color:#75af00">rel</span><span style="color:#f92672">=</span><span style="color:#d88200">&#34;stylesheet&#34;</span> <span style="color:#75af00">type</span><span style="color:#f92672">=</span><span style="color:#d88200">&#34;text/css&#34;</span> <span style="color:#75af00">href</span><span style="color:#f92672">=</span><span style="color:#d88200">&#34;{{url_for(&#39;static&#39;, filename=&#39;style.css&#39;)}}&#34;</span><span style="color:#111">&gt;</span>
</span></span></code></pre></div><h1 id="prolongement">Prolongement</h1>
<p>Publiez votre projet en ligne, sur Pythonanywhere.com</p>
<ul>
<li>modifier la dernière ligne, <code>app.run(debug=True)</code> du fichier <em>main.py</em> par:</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#00a8c8">if</span> <span style="color:#111">__name__</span> <span style="color:#f92672">==</span> <span style="color:#d88200">&#39;__main__&#39;</span><span style="color:#111">:</span>
</span></span><span style="display:flex;"><span>    <span style="color:#111">app</span><span style="color:#f92672">.</span><span style="color:#111">run</span><span style="color:#111">()</span>
</span></span></code></pre></div><ul>
<li>Aidez vous de la page <a href="https://arduino103.blogspot.com/2015/06/python-flask-pythonanywhere-partie-6.html">suivante (arduino103.blogspot)</a>: adaptez le tuto pour concevoir votre site en ligne, pour l&rsquo;instant sans base de données.</li>
</ul>
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<h1 id="liens">Liens</h1>
<ul>
<li>TP inspiré de: <a href="https://qkzk.xyz/docs/nsi/cours_premiere/ihm_web/flask/">https://qkzk.xyz/docs/nsi/cours_premiere/ihm_web/flask/</a></li>
<li>Autre TP de NSI utilisant Flask, avec explications sur le modèle MVC: <a href="https://lesmathsduyeti.fr/fr/lycee/nsi-premiere/interactions-client-serveur-flask/">site du Yeti</a></li>
<li>Flask pas à pas: <a href="https://perso.liris.cnrs.fr/pierre-antoine.champin/2017/progweb-python/cours/cm2.html">liris.cnrs dpt bio informatique</a></li>
</ul>
</article>

      

      <div style="height:100px;"></div>



    </div>

    
  

  
  <aside class="book-toc fixed">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#méthode-post">méthode POST</a></li>
    <li><a href="#méthode-get">méthode GET</a></li>
  </ul>
</nav>
  </aside>



  </main>
  
  

<div class="site_footer">
<a rel="license" href="http://creativecommons.org/licenses/by/4.0/"><img alt="Licence Creative Commons" style="border-width:0" src="/creative.png" /></a>


<span xmlns:dct="http://purl.org/dc/terms/" property="dct:title">Sciences numeriques</span> de <a xmlns:cc="http://creativecommons.org/ns#" href="" property="cc:attributionName" rel="cc:attributionURL">numerix.netlify.com</a> est mis à disposition selon les termes de la <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">licence Creative Commons Attribution 4.0 International</a>



</div>
  
</body>

</html>
