<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>trame NMEA
| Sciences numériques</title><link href="https://fonts.googleapis.com/css?family=Oxygen|Oxygen+Mono:300,400,700" rel=stylesheet><script type=text/javascript src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><script src=https://cdnjs.cloudflare.com/ajax/libs/prism/1.5.0/prism.min.js></script><script async src="https://www.googletagmanager.com/gtag/js?id=UA-167114468-1"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}
gtag('js',new Date());gtag('config','UA-167114468-1');</script><link rel=stylesheet href=/book.min.a0f843684db43b927f91709a0085eeed827ceed0e92660c675a3b53c43430f41.css><link rel=icon href=/favicon.png type=image/x-icon><div class=my-header-container><div class=my-site-header><img src=/logo-site-b.svg width="150 px"></div><div id=myHeader><div class=titre><h2><a href=/>Sciences numériques</a></h2></div></div></div><script async>window.onload=function(){let container=document.getElementsByClassName("book-page");let logodiv=document.getElementsByClassName("site-menu-before");let header=document.getElementById("myHeader");let screen=window.innerWidth;let site_footer=document.querySelector(".site_footer");try{let site_TOC=document.querySelector("#TableOfContents>ul");let newP=document.createElement('li');newP.textContent='Contenu de la page';site_TOC.appendChild(newP,null);}
catch(err)
{console.log(err.message);}
if(site_footer.parentNode!=document.body){let father=site_footer.parentNode;let clone=site_footer.cloneNode;father.removeChild(site_footer);document.body.appendChild(clone);}
if(screen<=850){document.getElementsByClassName("my-site-header")[0].style.display="none";}else{window.addEventListener("scroll",function(e){let spectral=document.getElementById("spectral");if(screen>850){if(window.pageYOffset>150){header.classList.add("sticky");if(container.lenght>0){container[0].style.marginTop="65px";};logodiv[0].style.height="120px";}else{header.classList.remove("sticky");if(container.lenght>0){container[0].style.marginTop="0px";};spectral.style.display="none";logodiv[0].style.height="220px";}}
if(screen<=850){if(window.pageYOffset>150){spectral.style.display="block";}else{spectral.style.display="none";}}});}}</script></head><body><input type=checkbox style=display:none id=menu-control><main class="flex container"><aside class="book-menu fixed"><nav role=navigation><div class=site-menu-before style=height:220px;display:block><img src=/logo-site.svg id=spectral height=50% style=display:none></div><style>nav ul a[href$=\2f docs\2fSNT_2nde\2fpages\2fpage8\2fnmea\2f ]{color:#004ed0}</style><ul><li><p><a href=/><strong>Accueil</strong></a></p></li><li><p><a href=/docs/PC_2nde/PC_index/><strong>Physique Chimie 2nde</strong></a></p><ul><li><a href=/docs/PC_2nde/physique/pages/page1/>physique du mouvement</a></li><li><a href=/docs/PC_2nde/physique/pages/page2/>échanges thermiques</a></li><li><a href=/docs/PC_2nde/chimie/pages/mole/>la mole</a></li><li><a href=/docs/PC_2nde/chimie/pages/transformation/>transformation chimique</a></li><li><a href=/docs/PC_2nde/chimie/pages/avancement/>animation avancement</a></li></ul></li><li><p><a href=/docs/PC_1ere/PC_index/><strong>Physique 1ere Spé</strong></a></p><ul><li><a href=/docs/PC_1ere/energie/energie1/>Energie</a></li><li><a href=/docs/PC_1ere/atome/atome/>modèle de Bohr de l&rsquo;atome</a></li><li><a href=/docs/PC_1ere/notebooks/PC_notebooks/>ipython notebooks</a></li></ul></li><li><p><a href=/docs/NSI/NSI_index/><strong>NSI</strong></a></p><ul><li><a href=/docs/NSI/NSI_architecture/>architecture informatique</a></li><li><a href=/docs/NSI/NSI_structure/>structure de données</a></li><li><a href=/docs/NSI/NSI_bases/>bases de données</a></li><li><a href=/docs/NSI/NSI_langages/>langages</a></li><li><a href=/docs/NSI/NSI_algorithmes/>algorithmes</a><br></li></ul></li><li><p><a href=/docs/SNT_2nde/SNT_index/><strong>SNT secondes</strong></a></p></li><li><p><a href=/posts/><strong>Posts</strong></a></p></li><li><p><a href=/docs/contact/simple-contact-form/><strong>Contact</strong></a></p></li></ul></nav><script>(function(){var menu=document.querySelector('aside.book-menu nav')
addEventListener('beforeunload',function(event){localStorage.setItem('menu.scrollTop',menu.scrollTop)});menu.scrollTop=localStorage.getItem('menu.scrollTop')})()</script></aside><div class=book-page><header class="align-center justify-between book-header"><label for=menu-control><img src=/svg/menu.svg alt=Menu></label>
<strong>trame NMEA</strong></header><article class=markdown><h1 id=la-trame-nmea>La trame NMEA</h1><h2 id=objectifs>Objectifs</h2><p>Comprendre ce qu’est une trame NMEA : une <strong>suite de caractères</strong> mis dans un format particulier (normalisé) pour permettre un échange entre systèmes et logiciels. Exploiter la trame obtenue pour réaliser une carte personnalisée.
Manipuler une chaine de caractères. Extraire des informations.</p><h2 id=principe>Principe</h2><p>Lorsqu’un récepteur GPS reçoit une information, il la transmet (au smartphone, à l’ordinateur auquel il est connecté, à l’interface gps de voiture) à l’aide d’une « phrase » dont la forme est strictement codifiée. On appelle cette « phrase » une trame.</p><figure><img src=../docs/satellites.png alt=satellites width=80%><figcaption>emission de signaux GPS</figcaption></figure><h2 id=recuperez-votre-propre-trame-nmea-partie-qui-ne-sera-pas-traitée-pendant-la-séance>Recuperez votre propre trame NMEA (partie qui ne sera pas traitée pendant la séance)</h2><p>Travail personnel en amont : Si possible, installer l’application NMEA Tools sur votre smartphone sur Androïd ou NMEAGps sur iOS.
Selon le mobile utilisé, pour enregistrer une série de trames GPS, il faut faire :
- Sur Android : <em>enregistrement</em> pour démarrer &gt; attendre quelques secondes que le signal se stabilise &gt; <em>enregistrement</em> pour arrêter &gt; Choisir <em>Enregistrer</em> puis nommer le fichier votre_nom.txt
- Sur IOS iphone : attendre que la barre de détection de la position passe au vert puis &gt; Bouton <em>log</em> en position <em>ON</em> pour démarrer &gt; attendre quelques secondes que le signal soit enregistré &gt; <em>log</em> pour arrêter &gt; L’application propose alors de récupérer un fichier nmea.log dans une application (notes, &hellip;) ou de le <em>partager</em>.</p><figure><img src=../docs/tools.png alt="appli NMEA-tools" width=200px><figcaption>application NMEA-tools</figcaption></figure><h2 id=que-contient-la-trame-nmea>Que contient la trame NMEA ?</h2><p>Parmi les différentes lignes constituant la trame, l&rsquo;une d&rsquo;entre elles débute par les symboles $GPGGA</p><p>Les données sont mises dans un format particulier expliqué ici :</p><figure><img src=../docs/exemple_trame.png alt="exemple de trame" width=100%><figcaption>extrait de trame NMEA</figcaption></figure><p>La valeur numérique recherchée est celle de la latitude et de la longitude du lieu :</p><figure><img src=../docs/detailNMEA.png alt="extrait de trame" width=40%><figcaption>detail de trame NMEA</figcaption></figure><p>Ces valeurs sont mises sous la forme <strong>DDMM.MMMM</strong> :</p><p>lorsque l&rsquo;on lit 4836.5375, la valeur doit être comprise comme : 48°36,5375&rsquo;</p><p>c&rsquo;est à dire :</p><ul><li>48°</li><li>36,5375 minutes d&rsquo;arc</li></ul><h1 id=travail>Travail</h1><p>Ajoutez votre fichier nmea.log au dossier du notebook. Ou bien, utilisez celle capturée par votre professeur, présente dans ce dossier.</p><h3 id=lecture-du-fichier-nmea-log>lecture du fichier nmea.log</h3><p>Executer le script suivant</p><div class=highlight><pre style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#111>fichier</span> <span style=color:#f92672>=</span> <span style=color:#111>open</span><span style=color:#111>(</span><span style=color:#d88200>&#39;docs/nmea.log&#39;</span><span style=color:#111>,</span><span style=color:#d88200>&#39;r&#39;</span><span style=color:#111>)</span>

<span style=color:#111>lignes</span> <span style=color:#f92672>=</span> <span style=color:#111>fichier</span><span style=color:#f92672>.</span><span style=color:#111>readlines</span><span style=color:#111>()</span> 
     
<span style=color:#00a8c8>for</span> <span style=color:#111>i</span><span style=color:#111>,</span><span style=color:#111>ligne</span> <span style=color:#f92672>in</span> <span style=color:#111>enumerate</span><span style=color:#111>(</span><span style=color:#111>lignes</span><span style=color:#111>):</span>
                  
    <span style=color:#00a8c8>if</span> <span style=color:#111>ligne</span> <span style=color:#f92672>!=</span><span style=color:#d88200>&#39;</span><span style=color:#8045ff>\n</span><span style=color:#d88200>&#39;</span><span style=color:#111>:</span>  <span style=color:#75715e>#  tester si la ligne est non vide</span>
        <span style=color:#00a8c8>print</span><span style=color:#111>(</span><span style=color:#d88200>&#39;lignes[&#39;</span><span style=color:#f92672>+</span> <span style=color:#111>str</span><span style=color:#111>(</span><span style=color:#111>i</span><span style=color:#111>)</span><span style=color:#f92672>+</span><span style=color:#d88200>&#39;] </span><span style=color:#8045ff>\n</span><span style=color:#d88200>&#39;</span><span style=color:#f92672>+</span> <span style=color:#111>ligne</span><span style=color:#111>)</span>             
                 
<span style=color:#111>fichier</span><span style=color:#f92672>.</span><span style=color:#111>close</span><span style=color:#111>()</span>                    </code></pre></div><h3 id=repérer-la-première-ligne-qui-commence-par-gpgga>Repérer la première ligne qui commence par <code>$GPGGA</code></h3><ul><li>noter le numéro de ligne</li><li>créer une variable <code>i</code> qui contiendra le numéro de la ligne</li></ul><div class=highlight><pre style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#111>i</span> <span style=color:#f92672>=</span> </code></pre></div><ul><li>afficher la ligne extraite de la trame NMEA : <code>print(lignes[i])</code></li><li>affecter <code>lignes[i]</code> à la variable <code>trame</code></li></ul><div class=highlight><pre style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#00a8c8>print</span><span style=color:#111>(</span><span style=color:#111>lignes</span><span style=color:#111>[</span>
<span style=color:#111>trame</span> <span style=color:#f92672>=</span> <span style=color:#111>lignes</span><span style=color:#111>[</span></code></pre></div><h3 id=sélectionner-des-caractères>sélectionner des caractères</h3><p>Une chaine de caractère peut être manipulée comme une liste en python. Ainsi, chaque caractère occupe un rang. Le premier caractère est le rang zero 0.</p><p>Pour extraire une série de caractères d&rsquo;une variable, on ajoute [rang debut : rang fin+1] à la suite du nom de cette variable.</p><p>Par exemple : Pour extraire le nom &lsquo;boby&rsquo; de la chaine <code>titre = 'boby joe roi des mers'</code>, on fait :
titre[0:4]</p><p>Testez le :
- executez la cellule suivante
- puis extraire &lsquo;joe&rsquo; de la chaine <code>titre</code> en écrivant <code>print(titre[rang debut : rang fin+1]</code> (remplacer rang debut : rang fin+1 par des valeurs numériques)</p><div class=highlight><pre style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#111>titre</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#39;boby joe roi des mers&#39;</span>
<span style=color:#00a8c8>print</span><span style=color:#111>(</span><span style=color:#111>titre</span><span style=color:#111>[</span></code></pre></div><h3 id=sélectionner-les-caractères-de-positionnement>sélectionner les caractères de positionnement</h3><p><strong>Selection de l&rsquo;heure :</strong>
On souhaite afficher les caractères relatifs à l&rsquo;heure :
On rappelle que le premier caractère <code>$</code> a le rang zero 0, le suivant <code>G</code> le rang 1, etc&hellip;</p><p>pour extraire l\&lsquo;heure de la variable <code>trame</code> , on fait : <code>trame[7:16]</code> si les caractères relatifs à l&rsquo;heure occupent les rangs 7 à 15.
- afficher la variable <code>trame</code>
- Puis afficher <code>trame[7:16]</code> (ajuster eventuellement les bornes)</p><div class=highlight><pre style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#00a8c8>print</span><span style=color:#111>(</span><span style=color:#111>trame</span><span style=color:#111>)</span>
<span style=color:#111>trame</span><span style=color:#111>[</span><span style=color:#ae81ff>7</span><span style=color:#111>:</span></code></pre></div><h3 id=selection-de-la-latitude>Selection de la latitude</h3><ul><li>dans la variable trame, calculer le rang des caractères que vous souhaitez extraire pour la latitude (N) :<br>Procéder de la même manière que pour l&rsquo;heure pour extraire cette fois les 9 caractères de la latitude contenus dans cette trame qui commencent par 43&hellip; :</li></ul><div class=highlight><pre style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#111>trame</span><span style=color:#111>[</span><span style=color:#ae81ff>17</span><span style=color:#111>:</span></code></pre></div><ul><li>affecter alors ce resultat à la variable <code>latitude</code></li></ul><div class=highlight><pre style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#111>latitude</span> <span style=color:#f92672>=</span> </code></pre></div><h3 id=longitude>longitude</h3><p>Vous allez refaire le même travail pour la longitude. Dans la même cellule :</p><ul><li>extraire les caractères de longitude de la variable <code>trame</code> à partir de leurs rangs, puis l&rsquo;affecter à la variable <code>longitude</code> : faire <code>longitude = trame[debut:fin]</code></li><li>afficher <code>longitude</code></li></ul><h3 id=marquer-la-position-sur-une-carte>marquer la position sur une carte</h3><p>Pour ouvrir la carte du site openstreetmap, avec des coordonnées latitude (-25.175342) et longitude (31.563275), taper dans la barre URL du navigateur :</p><div class=highlight><pre style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html>http://www.openstreetmap.org/?mlat=-25.175342<span style=color:#960050;background-color:#1e0010>&amp;</span>mlon=31.563275<span style=color:#960050;background-color:#1e0010>&amp;</span>zoom=15</code></pre></div><blockquote><p>Il vous faudra modifier le format des valeurs numériques passées en paramètre. Les valeurs numériques doivent être exprimées en valeurs décimales.</p></blockquote><h1 id=liens>Liens</h1><p>document dont est extrait ce TP : <a href=https://disciplines.ac-toulouse.fr/informatique/sites/informatique/files/fichiers/localisation/tramenmea_final_avecios.pdf>https://disciplines.ac-toulouse.fr/informatique/sites/informatique/files/fichiers/localisation/tramenmea_final_avecios.pdf</a></p></article><div style=height:100px></div></div><aside class="book-toc fixed"><nav id=TableOfContents><ul><li><a href=#la-trame-nmea>La trame NMEA</a><ul><li><a href=#objectifs>Objectifs</a></li><li><a href=#principe>Principe</a></li><li><a href=#recuperez-votre-propre-trame-nmea-partie-qui-ne-sera-pas-traitée-pendant-la-séance>Recuperez votre propre trame NMEA (partie qui ne sera pas traitée pendant la séance)</a></li><li><a href=#que-contient-la-trame-nmea>Que contient la trame NMEA ?</a></li></ul></li><li><a href=#travail>Travail</a><ul><li><ul><li><a href=#lecture-du-fichier-nmea-log>lecture du fichier nmea.log</a></li><li><a href=#repérer-la-première-ligne-qui-commence-par-gpgga>Repérer la première ligne qui commence par <code>$GPGGA</code></a></li><li><a href=#sélectionner-des-caractères>sélectionner des caractères</a></li><li><a href=#sélectionner-les-caractères-de-positionnement>sélectionner les caractères de positionnement</a></li><li><a href=#selection-de-la-latitude>Selection de la latitude</a></li><li><a href=#longitude>longitude</a></li><li><a href=#marquer-la-position-sur-une-carte>marquer la position sur une carte</a></li></ul></li></ul></li><li><a href=#liens>Liens</a></li></ul></nav></aside></main><div class=site_footer><a rel=license href=http://creativecommons.org/licenses/by/4.0/><img alt="Licence Creative Commons" style=border-width:0 src=/creative.png></a>
<span xmlns:dct=http://purl.org/dc/terms/ property=dct:title>Sciences numeriques</span> de <a xmlns:cc=http://creativecommons.org/ns# href property=cc:attributionName rel=cc:attributionurl>numerix.netlify.com</a> est mis à disposition selon les termes de la <a rel=license href=http://creativecommons.org/licenses/by/4.0/>licence Creative Commons Attribution 4.0 International</a></div></body></html>