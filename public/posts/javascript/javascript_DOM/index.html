<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Javascript le DOM
| Sciences numériques</title><link href="https://fonts.googleapis.com/css?family=Oxygen|Oxygen+Mono:300,400,700" rel=stylesheet><script type=text/javascript src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><link type=text/css rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/prism/1.5.0/themes/prism.min.css><script src=https://cdnjs.cloudflare.com/ajax/libs/prism/1.5.0/prism.min.js></script><link rel=stylesheet href=/book.min.9208a3f1a3afc192e0edbfd4ad2987e0a9f3192a29700ebaf94271510add0025.css><link rel=icon href=/favicon.png type=image/x-icon><div class=my-header-container><div class=my-site-header><img src=/logo-site-b.svg width="150 px"></div><div id=myHeader><div class=titre><h2><a href=/>Sciences numériques</a></h2></div></div></div><script async>window.onload=function(){let container=document.getElementsByClassName("book-page");let logodiv=document.getElementsByClassName("site-menu-before");let header=document.getElementById("myHeader");let screen=window.innerWidth;let site_footer=document.querySelector(".site_footer");try{let site_TOC=document.querySelector("#TableOfContents>ul");let newP=document.createElement('li');newP.textContent='Contenu de la page';site_TOC.appendChild(newP,null);}
catch(err)
{console.log(err.message);}
if(site_footer.parentNode!=document.body){let father=site_footer.parentNode;let clone=site_footer.cloneNode;father.removeChild(site_footer);document.body.appendChild(clone);}
if(screen<=850){document.getElementsByClassName("my-site-header")[0].style.display="none";}else{window.addEventListener("scroll",function(e){let spectral=document.getElementById("spectral");if(screen>850){if(window.pageYOffset>150){header.classList.add("sticky");if(container.lenght>0){container[0].style.marginTop="65px";};logodiv[0].style.height="120px";}else{header.classList.remove("sticky");if(container.lenght>0){container[0].style.marginTop="0px";};spectral.style.display="none";logodiv[0].style.height="220px";}}
if(screen<=850){if(window.pageYOffset>150){spectral.style.display="block";}else{spectral.style.display="none";}}});}}</script><link type=text/css rel=stylesheet href=css/https://cdnjs.cloudflare.com/ajax/libs/prism/1.5.0/themes/prism.min.css><script src=https://cdnjs.cloudflare.com/ajax/libs/prism/1.5.0/prism.min.js></script></head><body><input type=checkbox style=display:none id=menu-control><main class="flex container"><aside class="book-menu fixed"><nav role=navigation><div class=site-menu-before style=height:220px;display:block><img src=/logo-site.svg id=spectral height=50% style=display:none></div><style>nav ul a[href$=\2fposts\2fjavascript\2fjavascript_DOM\2f ]{color:#004ed0}</style><ul><li><p><a href=/><strong>Accueil</strong></a></p></li><li><p><a href=/docs/PC_2nde/PC_index/><strong>Physique Chimie 2nde</strong></a></p><ul><li><a href=/docs/PC_2nde/physique/pages/page1/>physique du mouvement</a></li><li><a href=/docs/PC_2nde/physique/pages/page2/>échanges thermiques</a></li></ul></li><li><p><a href=/docs/PC_1ere/PC_index/><strong>Physique 1ere Spé</strong></a></p><ul><li><a href=/docs/PC_1ere/energie/energie1/>Energie</a></li><li><a href=/docs/PC_1ere/atome/atome/>modèle de Bohr de l&rsquo;atome</a></li><li><a href=/docs/PC_1ere/notebooks/PC_notebooks/>ipython notebooks</a></li></ul></li><li><p><a href=/docs/NSI/NSI_index/><strong>ISN</strong></a></p><ul><li><a href=/posts/>Python</a></li><li><a href=/docs/NSI/CSS/page1/>CSS positionnement</a></li><li><a href=/docs/NSI/javascript/page1/>javascript : bases</a></li><li><a href=/docs/NSI/javascript_avance/page1/>javascript avancé</a></li><li><a href=/docs/NSI/mini_projet_spaceInvader/page1/>mini projet Space Invader</a><br></li></ul></li><li><p><a href=/docs/SNT_2nde/SNT_index/><strong>SNT secondes</strong></a></p></li><li><p><a href=/posts/><strong>Posts</strong></a></p></li><li><p><a href=/docs/contact/simple-contact-form/><strong>Contact</strong></a></p></li></ul></nav><script>(function(){var menu=document.querySelector('aside.book-menu nav')
addEventListener('beforeunload',function(event){localStorage.setItem('menu.scrollTop',menu.scrollTop)});menu.scrollTop=localStorage.getItem('menu.scrollTop')})()</script></aside><div class=book-posts><header class="align-center justify-between book-header"><label for=menu-control><img src=/svg/menu.svg alt=Menu></label>
<strong>Javascript le DOM</strong></header><header class=markdown><h1>Javascript le DOM</h1><h5><strong>Sept 1, 1019</strong></h5></header><article class=markdown><h1 id=le-dom>Le DOM</h1><p>le DOM ou Document Object Model, une interface qui fait partie du BOM (Browser Object Model) et grâce à laquelle nous allons pouvoir manipuler le contenu HTML et les styles de nos pages.</p><p>Le DOM est ainsi une représentation structurée du document sous forme « d’arbre » crée automatiquement par le navigateur. Chaque branche de cet arbre se termine par ce qu’on appelle un nœud qui va contenir des objets. On va finalement pouvoir utiliser ces objets, leurs propriétés et leurs méthodes en JavaScript.</p><p>C&rsquo;est en particulier l’interface <code>Document</code> que nous allons utiliser.</p><blockquote><p>Par exemple lorsque l’on souhaite injecter du texte dans un paragraphe dont l&rsquo;attribut <code>id=&quot;ancre&quot;</code>, un élément que l&rsquo;on aura défini dans la partie <code>html</code> du code avec :
<code>&lt;p id = &quot;ancre&quot;&gt;&lt;/p&gt;</code></p><p>on utilisera dans la partie javascript:</p><p><code>document.getElementById('ancre').innerHTML = &quot;nouveau texte à afficher&quot;</code>.</p></blockquote><h1 id=manipuler-les-éléments-de-la-page>Manipuler les éléments de la page</h1><h2 id=accéder-à-un-élément-à-l-aide-d-un-sélecteur>accéder à un élément à l&rsquo;aide d&rsquo;un sélecteur</h2><p>Pour manipuler les éléments d&rsquo;une page affichée dans le navigateur, on doit <em>accéder</em> à cet élément.
Cela peut se faire à l&rsquo;aide des <em>ancres</em> laissées sur ces éléments. On peut les sélectionner, comme en CSS avec leur classe, leur ID ou le nom de la balise. Pour réaliser ceci, on utilise les fonctions suivantes:</p><ul><li><code>document.getElementById()</code> permet de sélectionner un élément html à partir de son id.</li><li><code>document.querySelector()</code> un sélecteur plus générique qui sélectionne les éléments à la manière des sélecteurs css.</li></ul><p><em>Exemple 1 :</em> soit un élement avec attribut id=&lsquo;elem&rsquo; de la page :
On cherche à atteindre cet élément et en modifier la couleur :</p><p><em>(écrire le code suivant dans un fichier que vous nommerez <code>exemple1.html</code>)</em></p><pre><code>&lt;body&gt;
  &lt;h1 id=&quot;elem&quot;&gt;Un titre qui n'a pas de couleur&lt;/h1&gt;
&lt;script&gt;
let elem = document.getElementById('elem');
elem.style.background = 'red';
&lt;/script&gt;
&lt;/body&gt;
</code></pre><p>On met cet élément dans une variable <code>elem</code>. Puis on peut modifier ses attributs, comme par exemple celui <code>style</code> pour la couleur.</p><p>Ouvrir le fichier avec un navigateur. La couleur du titre devrait apparaitre &hellip; en rouge !</p><p><em>Exemple 2 :</em> manipulation des données d&rsquo;un formulaire et utilisation de <code>document.querySelector()</code> : Voir <a href=https://lyceum.fr/1g/nsi/5-interactions-entre-lhomme-et-la-machine-sur-le-web/4-gestion-des-evenements-en-javascript>Lyceum javascript</a></p><h2 id=parcourir-l-arbre-du-dom>parcourir l&rsquo;arbre du DOM</h2><p>La propriété <code>childNodes</code> de l&rsquo;interface <code>Node</code> renvoie une liste sous forme de tableau des nœuds enfants de l’élément donné. Le premier nœud enfant reçoit l’indice 0 comme pour tout tableau.</p><p>Et pour obtenir l&rsquo;élément parent d&rsquo;un noeud, on utilise la propriété <code>parentElement</code>.</p><p><em>Exemple 3 :</em>
Vous pouvez tester cet exemple en enregistrant le code suivant dans un fichier que vous nommerez <code>exemple3.html</code>:</p><pre><code>&lt;body&gt;
&lt;div&gt;
  &lt;p id=&quot;myP&quot;&gt;Un peu de texte, &lt;a&gt;un lien&lt;/a&gt; et &lt;strong&gt;une portion en emphase&lt;/strong&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;/body&gt;
</code></pre><p>Ouvrir alors la page pour l&rsquo;afficher dans le navigateur.</p><p>Cette page a alors l&rsquo;arbre de DOM suivant qui lui est associé :</p><figure><img src=../images/dom.png width=80% alt="arbre du DOM"><figcaption>arbre du DOM</figcaption></figure><p>Le premier enfant de <code>&lt;p&gt;</code> est un nœud textuel, alors que le dernier enfant est un élément <code>&lt;strong&gt;</code>. Cet élément <code>&lt;strong&gt;</code> possède pour noeud enfant un noeud textuel dont le contenu et <em>une portion en emphase</em></p><p>Dans la console, saisir une à une les instructions suivantes : (sans les commentaires)</p><pre><code>&gt; let paragraph = document.getElementById('myP'); // pour stocker le noeud parent.
&gt; let first = paragraph.firstChild; // parcours de l'arbre jusqu'au 1er enfant
&gt; alert(first.nodeValue); // pour récuperer le contenu du noeud textuel
</code></pre><figure><img src=../images/dom1.png width=600px alt="arbre du DOM"><figcaption>contenu textuel du premier enfant</figcaption></figure><p>Puis :</p><pre><code>&gt; let last = paragraph.lastChild;
&gt; alert(last.firstChild.data); // pour recuperer le contenu textuel de la balise
</code></pre><figure><img src=../images/dom2.png width=600px alt="arbre du DOM"><figcaption>contenu textuel du dernier enfant</figcaption></figure><p>On peut réaliser cette dernière manipulation en ayant recours à la liste de tous les enfants de <code>paragraph</code>: en écrivant dans la console :</p><p><code>&gt; paragraph.childnodes</code></p><figure><img src=../images/dom3.png width=600px alt="arbre du DOM"><figcaption>liste de tous les enfants du noeud parent</figcaption></figure><p>On peut lire dans la console que le noeud textuel (<code>&lt;strong&gt;Une portion avec emphase&lt;/strong&gt;</code>) est au rang 3 dans la liste des noeuds enfants (<code>childNodes</code>).</p><p>On affiche alors son contenu textuel : dans la console, écrire :</p><pre><code>&gt; let last = paragraph.childNodes[3]
&gt; alert(last.firstChild.data)
</code></pre><figure><img src=../images/dom4.png width=600px alt="arbre du DOM"><figcaption>contenu textuel de last</figcaption></figure><p>Pour finir, on peut modifier à volonté les éléments textuels en modifiant la valeur renvoyée par <code>.data</code> ou <code>.nodeValue</code> :</p><p>Dans la console :</p><pre><code>&gt; last.firstChild.data = 'un autre texte'
</code></pre><figure><img src=../images/dom5.png width=600px alt="arbre du DOM"><figcaption>modification du contenu textuel de last</figcaption></figure><h1 id=ajouter-un-paragraphe-dans-la-page>Ajouter un paragraphe dans la page</h1><p>Pour créer un nouvel élément dans la page :</p><ul><li>créer un nouveau noeud an appelant la fonction <code>creatElement</code> associée à <code>document</code></li><li>ajouter la balise textuelle associée à ce noeud s&rsquo;il y en a une</li><li>ajouter eventuellement des attributs à cet élément: <code>setAttribute(attribut,valeur)</code></li><li>ajouter cet élement directement à son noeud parent: <code>appenChild</code></li></ul><p><em>Exemple :</em></p><pre><code>&lt;head&gt;
&lt;meta charset=&quot;utf-8&quot; /&gt;
&lt;script&gt;
      var x = 10;

      /*
      Affiche la valeur de la variable x. Puis incrémente de 1 la valeur de la variable x
       */
      function addXToThePage() {
        let newP = document.createElement('p');
        newP.innerHTML = &quot;&lt;p&gt;La valeur de x = &quot; + x + &quot;&lt;/p&gt;&quot;;
        newP.setAttribute('style', 'color : red;');
        document.getElementById(&quot;newPar&quot;).appendChild(newP);
        x = x + 1;
      }
    &lt;/script&gt;
  &lt;/head&gt;
&lt;body&gt;
    &lt;button onclick=&quot;addXToThePage();&quot;&gt;
      Clique ici pour afficher la valeur de la variable x
    &lt;/button&gt;
    &lt;div id=&quot;newPar&quot;&gt;&lt;/div&gt;
&lt;/body&gt;
</code></pre><p><em>Résultat :</em></p><p><button onclick=addXToThePage();>
Clique ici pour afficher la valeur de la variable x</button><div id=newPar></div></p><script>var x=10;function addXToThePage(){let newP=document.createElement('p');newP.innerHTML="<p>La valeur de x = "+x+"</p>";newP.setAttribute('style','color : red;');document.getElementById("newPar").appendChild(newP);x=x+1;}
function buildTable(){let prenom=document.getElementById("prenom").value;let nom=document.getElementById("nom").value;let email=document.getElementById("email").value;let contenu=document.querySelector('.client1>.first');contenu.textContent=prenom;}</script><h1 id=lire-et-modifier-un-tableau>Lire et modifier un tableau</h1><p>Le programme suivant montre l&rsquo;utilisation d&rsquo;un formulaire. Lors du clic sur le bouton, on accède aux valeurs des champs du formulaire avec la propriété <code>.value</code> associée à l&rsquo;élément du formulaire.</p><p>On recopie alors chacune des colonnes du tableau avec ces valeurs.</p><p>Pour accéder à chaque élément de la page, on utilise les règles de selection vues plus haut, avec <code>document.getElementById</code> et <code>document.querySelector</code>.</p><p>L&rsquo;exemple présenté ici est incomplet et ne renvoie dans le tableau que le champ <code>prenom</code>. Il faudra completer le script pour renvoyer aussi les noms et email.</p><table><thead><tr><th>Prénom</th><th>Nom</th><th>email</th></tr></thead><tbody><tr class=client1><td class=first></td><td class=last></td><td class=mail></td></tr></tbody></table><form><fieldset><legend>Nom complet</legend><ol><li><label for=prenom>Saisir le prénom</label>
<input id=prenom type=textarea name=prenom placeholder=prenom></li><li><label for=nom>Saisir le nom</label>
<input id=nom type=textarea name=nom placeholder=nom></li><li><label for=email>E-mail</label>
<input id=email type=email name=email placeholder=exemple@domaine.com required></li></ol></fieldset></form><p><button onclick=buildTable();> Soumettre</button></p><pre><code>&lt;body&gt;
&lt;table&gt;
      &lt;thead&gt;
        &lt;tr&gt;
          &lt;th&gt;Prénom&lt;/th&gt;
          &lt;th&gt;Nom&lt;/th&gt;
          &lt;th&gt;email&lt;/th&gt;
        &lt;/tr&gt;
      &lt;/thead&gt;
      &lt;tbody&gt;
        &lt;tr class=&quot;client1&quot;&gt;
          &lt;td class=&quot;first&quot;&gt;&lt;/td&gt;&lt;td class=&quot;last&quot;&gt;&lt;/td&gt;&lt;td class=&quot;mail&quot;&gt;&lt;/td&gt;
        &lt;/tr&gt;
      &lt;/tbody&gt;
&lt;/table&gt;
    
&lt;form&gt;
      &lt;fieldset&gt;
        &lt;legend&gt;Nom complet&lt;/legend&gt;
        &lt;ol&gt;
          &lt;li&gt;
            &lt;label for=&quot;prenom&quot;&gt;Saisir le prénom&lt;/label&gt;
            &lt;input id=&quot;prenom&quot;  type=&quot;textarea&quot; name=&quot;prenom&quot; placeholder=&quot;prenom&quot;/&gt;
          &lt;/li&gt;
          &lt;li&gt;
            &lt;label for=&quot;nom&quot;&gt;Saisir le nom&lt;/label&gt;
            &lt;input id=&quot;nom&quot; type=&quot;textarea&quot; name=&quot;nom&quot; placeholder=&quot;nom&quot; /&gt;
          &lt;/li&gt;
          &lt;li&gt;
            &lt;label for=&quot;email&quot;&gt;E-mail&lt;/label&gt;
            &lt;input
              id=&quot;email&quot;
              type=&quot;email&quot;
              name=&quot;email&quot;
              placeholder=&quot;exemple@domaine.com&quot;
              required
            /&gt;
          &lt;/li&gt;
        &lt;/ol&gt;
      &lt;/fieldset&gt;
&lt;/form&gt; 
 
&lt;button onclick=&quot;buildTable();&quot;&gt;  Soumettre &lt;/button&gt;
&lt;script&gt;
      function buildTable(){
          let prenom = document.getElementById(&quot;prenom&quot;).value;
          let nom = document.getElementById(&quot;nom&quot;).value;
          let email = document.getElementById(&quot;email&quot;).value;

          // champ prenom
          let contenu =document.querySelector('.client1&gt;.first');
          contenu.textContent=prenom;
      
          // champ nom
        
          // champ email
      }
&lt;/script&gt;
&lt;/body&gt;
</code></pre><h1 id=liens>Liens</h1><ul><li>introduction au DOM W3school : <a href=https://www.w3schools.com/js/js_htmldom_methods.asp>https://www.w3schools.com/js/js_htmldom_methods.asp</a></li><li>DOM et javascript : <a href=https://developer.mozilla.org/fr/docs/Web/API/Document_Object_Model/Introduction>https://developer.mozilla.org/fr/docs/Web/API/Document_Object_Model/Introduction</a></li><li>textContent pour écrire du texte dans un élément textuel : <a href=https://developer.mozilla.org/fr/docs/Web/API/Node/textContent>https://developer.mozilla.org/fr/docs/Web/API/Node/textContent</a></li></ul></article><div style=height:100px></div></div></main><div class=site_footer><a rel=license href=http://creativecommons.org/licenses/by/4.0/><img alt="Licence Creative Commons" style=border-width:0 src=/creative.png></a>
<span xmlns:dct=http://purl.org/dc/terms/ property=dct:title>Sciences numeriques</span> de <a xmlns:cc=http://creativecommons.org/ns# href property=cc:attributionName rel=cc:attributionurl>numerix.netlify.com</a> est mis à disposition selon les termes de la <a rel=license href=http://creativecommons.org/licenses/by/4.0/>licence Creative Commons Attribution 4.0 International</a></div></body></html>