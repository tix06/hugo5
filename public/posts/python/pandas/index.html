<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Python Pandas
| Sciences numériques</title><link href="https://fonts.googleapis.com/css?family=Oxygen|Oxygen+Mono:300,400,700" rel=stylesheet><script type=text/javascript src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><link rel=stylesheet href=/book.min.68b704e1b23e7298ccf28f9db55532d3c224ee41caed9c8362475c02b49f2949.css><link rel=icon href=/favicon.png type=image/x-icon><div class=my-header-container><div class=my-site-header><img src=/logo-site-b.svg width="150 px"></div><div id=myHeader><div class=titre><h2><a href=/>Sciences numériques</a></h2></div></div></div><script async>window.onload=function(){let container=document.getElementsByClassName("book-page");let logodiv=document.getElementsByClassName("site-menu-before");let header=document.getElementById("myHeader");let screen=window.innerWidth;let site_footer=document.querySelector(".site_footer");try{let site_TOC=document.querySelector("#TableOfContents>ul");let newP=document.createElement('li');newP.textContent='Contenu de la page';site_TOC.appendChild(newP,null);}
catch(err)
{console.log(err.message);}
if(site_footer.parentNode!=document.body){let father=site_footer.parentNode;let clone=site_footer.cloneNode;father.removeChild(site_footer);document.body.appendChild(clone);}
if(screen<=850){document.getElementsByClassName("my-site-header")[0].style.display="none";}else{window.addEventListener("scroll",function(e){let spectral=document.getElementById("spectral");if(screen>850){if(window.pageYOffset>150){header.classList.add("sticky");if(container.lenght>0){container[0].style.marginTop="65px";};logodiv[0].style.height="120px";}else{header.classList.remove("sticky");if(container.lenght>0){container[0].style.marginTop="0px";};spectral.style.display="none";logodiv[0].style.height="220px";}}
if(screen<=850){if(window.pageYOffset>150){spectral.style.display="block";}else{spectral.style.display="none";}}});}}</script></head><body><input type=checkbox style=display:none id=menu-control><main class="flex container"><aside class="book-menu fixed"><nav role=navigation><div class=site-menu-before style=height:220px;display:block><img src=/logo-site.svg id=spectral height=50% style=display:none></div><style>nav ul a[href$=\2fposts\2fpython\2fpandas\2f ]{color:#004ed0}</style><ul><li><p><a href=/><strong>Accueil</strong></a></p></li><li><p><a href=/docs/PC_2nde/PC_index/><strong>Physique Chimie 2nde</strong></a></p><ul><li><a href=/docs/PC_2nde/physique/pages/page1/>physique du mouvement</a></li></ul></li><li><p><a href=/docs/PC_1ere/PC_index/><strong>Physique 1ere Spé</strong></a></p><ul><li><a href=/docs/PC_1ere/energie/energie1/>Energie</a></li><li><a href=/docs/PC_1ere/atome/atome/>modèle de Bohr de l&rsquo;atome</a></li><li><a href=/docs/PC_1ere/notebooks/PC_notebooks/>ipython notebooks</a></li></ul></li><li><p><a href=/docs/NSI/NSI_index/><strong>ISN</strong></a></p><ul><li><a href=/posts/>Python</a></li><li><a href=/docs/NSI/CSS/page1/>CSS positionnement</a></li><li><a href=/docs/NSI/javascript/page1/>javascript : bases</a></li><li><a href=/docs/NSI/javascript_avance/page1/>javascript avancé</a></li><li><a href=/docs/NSI/mini_projet_spaceInvader/page1/>mini projet Space Invader</a><br></li></ul></li><li><p><a href=/docs/SNT_2nde/SNT_index/><strong>SNT secondes</strong></a></p></li><li><p><a href=/posts/><strong>Blog</strong></a></p></li><li><p><a href=/docs/contact/simple-contact-form/><strong>Contact</strong></a></p></li></ul></nav><script>(function(){var menu=document.querySelector('aside.book-menu nav')
addEventListener('beforeunload',function(event){localStorage.setItem('menu.scrollTop',menu.scrollTop)});menu.scrollTop=localStorage.getItem('menu.scrollTop')})()</script></aside><div class=book-posts><header class="align-center justify-between book-header"><label for=menu-control><img src=/svg/menu.svg alt=Menu></label>
<strong>Python Pandas</strong></header><header class=markdown><h1>Python Pandas</h1><h5><strong>Sept 1, 1019</strong></h5></header><article class=markdown><h1 id=python-la-librairie-pandas>Python : la librairie pandas</h1><h2 id=notebook>notebook</h2><p>Le notebook présenté ici est à télécharger à l&rsquo;adresse suivante :</p><p><a href=https://mybinder.org/v2/gh/tix06/notebook_datas.git/master><img src=https://mybinder.org/badge_logo.svg alt=Binder></a></p><p><a href=https://mybinder.org/v2/gh/tix06/notebook_datas.git/master>https://mybinder.org/v2/gh/tix06/notebook_datas.git/master</a></p><p>Puis choisir : <code>gestionBase_de_donnees_python.ipynb</code></p><p>Exercez vous en suivant le tutoriel avec ce notebook.</p><h2 id=présentation>présentation</h2><p>Pandas fournit des structures de données puissantes et simples à utiliser, ainsi que les moyens d&rsquo;opérer rapidement des opérations sur ces structures.</p><p>Cette librairie va utiliser et faire des opérations sur un objet : le <em>DataFrame</em>
Ce DataFrame est très similaire aux tables des bases de données relationnelles (type MySQL, PostgreSQL, etc.) que l&rsquo;on manipule grâce au langage SQL.</p><p>Ce notebook est inspiré du cours en ligne :</p><p><a href=https://openclassrooms.com/fr/courses/4452741-decouvrez-les-librairies-python-pour-la-data-science/5558996-passez-de-numpy-a-pandas>https://openclassrooms.com/fr/courses/4452741-decouvrez-les-librairies-python-pour-la-data-science/5558996-passez-de-numpy-a-pandas</a></p><h2 id=représentation-d-un-tableau-avec-la-librairie-numpy>représentation d&rsquo;un tableau avec la librairie numpy</h2><p><em>numpy</em> est une librairie utile pour de nombreuses applications mathématiques. <em>numpy</em> permet de manipuler facilement des tableaux. Un tableau est une liste contenant une nouvelle liste pour chacun de ses éléments. C&rsquo;est une liste de listes.</p><p>L&rsquo;avantage de manipuler des tableaux, <em>(array)</em>, plutôt que des listes, c&rsquo;est de pouvoir réaliser des calculs sur les valeurs comme si la structure de donnée était une matrice.</p><p>On va voir ici que cette représentation des données n&rsquo;est pas la meilleure façon qu&rsquo;il soit lorsqu&rsquo;on l&rsquo;utilise pour une collection (par exemple pour des <em>informations</em>).</p><p>Prenons l&rsquo;exemple de la <strong>programmation d&rsquo;une salle de cinéma</strong> de type cinémathèque :</p><p>On renseigne pour chacune des salles de ce cinéma (pour chacune des lignes), les valeurs : le titre du film (colonne 1), horaire (colonne 2), realisateur (col 3), année (col 4).</p><div class=highlight><pre style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#75715e>#************************************#</span>
<span style=color:#75715e>#****** un premier exemple **********#</span>
<span style=color:#75715e>#******* de numpy à panda ***********#</span>
<span style=color:#75715e>#************************************#</span>

<span style=color:#f92672>import</span> <span style=color:#111>numpy</span> <span style=color:#f92672>as</span> <span style=color:#111>np</span>
<span style=color:#111>tableau2D</span> <span style=color:#f92672>=</span> <span style=color:#111>[</span>
    <span style=color:#111>[</span><span style=color:#d88200>&#39;la rage aux poings&#39;</span><span style=color:#111>,</span> <span style=color:#d88200>&#39;18h00&#39;</span> <span style=color:#111>,</span> <span style=color:#d88200>&#39;Eric le Hung&#39;</span><span style=color:#111>,</span> <span style=color:#ae81ff>1975</span><span style=color:#111>],</span> <span style=color:#75715e># film projeté dans la salle 1</span>
    <span style=color:#111>[</span><span style=color:#d88200>&#39;le million&#39;</span> <span style=color:#111>,</span> <span style=color:#d88200>&#39;15h00&#39;</span><span style=color:#111>,</span> <span style=color:#d88200>&#39;René Clair&#39;</span><span style=color:#111>,</span> <span style=color:#ae81ff>1931</span><span style=color:#111>],</span> <span style=color:#75715e># dans la salle 2</span>
    <span style=color:#111>[</span><span style=color:#d88200>&#39;Rendez vous à Badenberg&#39;</span><span style=color:#111>,</span> <span style=color:#d88200>&#39;21h00&#39;</span>  <span style=color:#111>,</span> <span style=color:#d88200>&#39;René Meurice&#39;</span><span style=color:#111>,</span> <span style=color:#ae81ff>1970</span><span style=color:#111>],</span> <span style=color:#75715e># dans la salle 3</span>
    <span style=color:#111>[</span><span style=color:#d88200>&#39;Le cercle rouge&#39;</span><span style=color:#111>,</span> <span style=color:#d88200>&#39;18h05&#39;</span><span style=color:#111>,</span> <span style=color:#d88200>&#39;Jean-Pierre Melville&#39;</span><span style=color:#111>,</span> <span style=color:#ae81ff>1970</span><span style=color:#111>],</span> <span style=color:#75715e># dans la salle 4</span>
<span style=color:#111>]</span>
<span style=color:#111>tableau_numpy</span> <span style=color:#f92672>=</span> <span style=color:#111>np</span><span style=color:#f92672>.</span><span style=color:#111>array</span><span style=color:#111>(</span><span style=color:#111>tableau2D</span><span style=color:#111>)</span>
<span style=color:#111>tableau_numpy</span></code></pre></div><div class=highlight><pre style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#75715e># acceder à l&#39;élément de rang 3 de la ligne 0 : </span>
<span style=color:#111>tableau_numpy</span><span style=color:#111>[</span><span style=color:#ae81ff>0</span><span style=color:#111>,</span><span style=color:#ae81ff>3</span><span style=color:#111>]</span></code></pre></div><div class=highlight><pre style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#75715e># acceder à TOUS les elements au rang 0 (donc la première colonne)</span>
<span style=color:#111>tableau_numpy</span><span style=color:#111>[:,</span><span style=color:#ae81ff>0</span><span style=color:#111>]</span></code></pre></div><p>C&rsquo;est assez pratique certes, mais <code>tableau_numpy[:, 0]</code> quand cette colonne possède un descripteur (le nom du film), ce n&rsquo;est pas très explicite.</p><p>On va voir maintenant ce qu&rsquo;apporte la représentation des données avec la librairie <em>Pandas</em>.</p><h2 id=représentation-des-données-avec-la-librairie-pandas>représentation des données avec la librairie pandas</h2><p>Les données sont maintenant mises dans un <em>DataFrame</em>, et plus un tableau <em>array</em>.</p><div class=highlight><pre style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#75715e>#***************************#</span>
<span style=color:#75715e>#**** creer un DataFrame ***#</span>
<span style=color:#75715e>#***************************#</span>

<span style=color:#f92672>import</span> <span style=color:#111>pandas</span> <span style=color:#f92672>as</span> <span style=color:#111>pd</span>  <span style=color:#75715e># on importe la librairie pandas</span>
<span style=color:#111>tableau2D_df</span> <span style=color:#f92672>=</span> <span style=color:#111>pd</span><span style=color:#f92672>.</span><span style=color:#111>DataFrame</span><span style=color:#111>(</span><span style=color:#111>tableau2D</span><span style=color:#111>)</span> <span style=color:#75715e># on créé un DataFrame tableau2D_df à partir de l&#39;array tableau2D</span>
<span style=color:#111>tableau2D_df</span> <span style=color:#75715e># et on l&#39;affiche</span></code></pre></div><div class=highlight><pre style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#75715e>#******************************************#</span>
<span style=color:#75715e>#********** passage du tableau np *********#</span>
<span style=color:#75715e>#*** ainsi que les index et descripteurs **#</span>
<span style=color:#75715e>#******************************************#</span>

<span style=color:#111>tableau2D_df</span> <span style=color:#f92672>=</span> <span style=color:#111>pd</span><span style=color:#f92672>.</span><span style=color:#111>DataFrame</span><span style=color:#111>(</span><span style=color:#111>tableau_numpy</span><span style=color:#111>,</span>
                                <span style=color:#111>index</span> <span style=color:#f92672>=</span> <span style=color:#111>[</span><span style=color:#d88200>&#39;salle 1&#39;</span><span style=color:#111>,</span> <span style=color:#d88200>&#39;salle 2&#39;</span><span style=color:#111>,</span> <span style=color:#d88200>&#39;salle 3&#39;</span><span style=color:#111>,</span><span style=color:#d88200>&#39;salle 4&#39;</span><span style=color:#111>],</span>
                                <span style=color:#111>columns</span> <span style=color:#f92672>=</span> <span style=color:#111>[</span><span style=color:#d88200>&#39;titre&#39;</span><span style=color:#111>,</span> <span style=color:#d88200>&#39;horaire&#39;</span><span style=color:#111>,</span> <span style=color:#d88200>&#39;realisateur&#39;</span><span style=color:#111>,</span> <span style=color:#d88200>&#39;année&#39;</span><span style=color:#111>])</span>
<span style=color:#111>tableau2D_df</span></code></pre></div><p>On peut maintenant réduire le tableau en une seule colonne, par exemple celle dont l&rsquo;etiquette est <em>horaire</em>. On obtient alors une <em>serie</em> de données.</p><div class=highlight><pre style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#75715e># reduire le tableau (SELECT)</span>
<span style=color:#111>tableau2D_df</span><span style=color:#f92672>.</span><span style=color:#111>horaire</span>     <span style=color:#75715e># 1ere methode</span>
<span style=color:#111>tableau2D_df</span><span style=color:#111>[</span><span style=color:#d88200>&#39;horaire&#39;</span><span style=color:#111>]</span> <span style=color:#75715e># 2e methode</span></code></pre></div><p>Et si l&rsquo;on a besoin d&rsquo;une série comprenant 2 colonnes (ou plus), on utilise la syntaxe suivante :</p><div class=highlight><pre style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#111>tableau2D_df</span><span style=color:#111>[[</span><span style=color:#d88200>&#34;titre&#34;</span><span style=color:#111>,</span><span style=color:#d88200>&#34;horaire&#34;</span><span style=color:#111>]]</span></code></pre></div><h2 id=parcours-et-exploration-des-données>parcours et exploration des données</h2><p>On peut utiliser une boucle bornée qui, à chaque itération, donne :</p><ul><li>l&rsquo;indice</li><li>le contenu de la serie pour cet index (c&rsquo;est à dire les valeurs et leur etiquette pour chacun des objets)</li></ul><p>On utilise la fonction <code>iterrow</code> associée au DataFrame :</p><pre><code>for index, valeurs in DataFrame.iterrows() : 
    ...
</code></pre><div class=highlight><pre style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#75715e># parcourir</span>
<span style=color:#00a8c8>for</span> <span style=color:#111>ind_ligne</span><span style=color:#111>,</span> <span style=color:#111>contenu_ligne</span> <span style=color:#f92672>in</span> <span style=color:#111>tableau2D_df</span><span style=color:#f92672>.</span><span style=color:#111>iterrows</span><span style=color:#111>():</span>
    <span style=color:#00a8c8>print</span><span style=color:#111>(</span><span style=color:#d88200>&#34;Voici le film de la </span><span style=color:#d88200>%s</span><span style=color:#d88200> :&#34;</span> <span style=color:#f92672>%</span> <span style=color:#111>ind_ligne</span><span style=color:#111>)</span>
    <span style=color:#00a8c8>print</span><span style=color:#111>(</span><span style=color:#111>contenu_ligne</span><span style=color:#111>)</span>
    <span style=color:#00a8c8>print</span><span style=color:#111>(</span><span style=color:#d88200>&#34;--------------------&#34;</span><span style=color:#111>)</span></code></pre></div><h2 id=accéder-à-un-seul-des-objets-de-la-collection>accéder à un seul des objets de la collection</h2><p>Cette fois, plutôt que d&rsquo;utiliser une boucle bornée et d&rsquo;afficher TOUS les objets de la collection, on cherche à en afficher un seul.</p><p>Cette fois le tri ne se fait pas selon une colonne, comme par exemple pour <code>tableau2D_df['ventre']</code> mais par ligne, avec :</p><p>`tableau_2D_df.loc[&lsquo;salle 3&rsquo;] par exemple</p><p>On aura ainsi le descriptif du film programmé dans cette salle.</p><div class=highlight><pre style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#75715e># acceder à un objet</span>
<span style=color:#111>tableau2D_df</span><span style=color:#f92672>.</span><span style=color:#111>iloc</span><span style=color:#111>[</span><span style=color:#ae81ff>2</span><span style=color:#111>]</span> <span style=color:#75715e># Avec iloc(), indexation positionnelle</span>
<span style=color:#111>tableau2D_df</span><span style=color:#f92672>.</span><span style=color:#111>loc</span><span style=color:#111>[</span><span style=color:#d88200>&#34;salle 3&#34;</span><span style=color:#111>]</span> <span style=color:#75715e># Avec loc(), indexation par label</span></code></pre></div><h2 id=rechercher-un-film>Rechercher un film</h2><p>On va maintenant trier le tableau jusqu&rsquo;à trouver l&rsquo;élement correspondant.</p><p>On cherche par exemple, dans quelle salle passe le film <em>&lsquo;Rendez vous à Badenberg&rsquo;</em> : La colonne correspondant à cette valeur est celle dont l&rsquo;etiquette est <code>'titre'</code>. On écrit alors une expression logique, qui est évaluée pour chaque objet, et qui renvoie <code>true</code> si le titre correspond à celui recherché, et <code>false</code> sinon.</p><p>La console affiche alors une serie de données :</p><div class=highlight><pre style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#75715e># trier (WHERE)</span>
<span style=color:#111>tableau2D_df</span><span style=color:#111>[</span><span style=color:#d88200>&#34;titre&#34;</span><span style=color:#111>]</span> <span style=color:#f92672>==</span> <span style=color:#d88200>&#39;Rendez vous à Badenberg&#39;</span></code></pre></div><blockquote><p><strong>Question :</strong> Ecrire l&rsquo;instruction qui renverra <code>true</code> pour toutes les salles projettant un film réalisé en 1970.
Testez votre instruction dans la cellule suivante.</p></blockquote><div class=highlight><pre style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python></code></pre></div><h2 id=filtrer-les-données-du-tableau>filtrer les données du tableau</h2><p>On va maintenant appliquer l&rsquo;expression logique vue plus haut pour reduire le DataFrame aux seuls objets pour lesquels l&rsquo;expression renvoie <code>true</code>. On dit que l&rsquo;on a <strong>filtré</strong> les données.</p><p><strong>Premier exemple :</strong> filtrage du tableau pour ne conserver que la salle dans laquelle passe le film <em>&lsquo;Rendez vous à Badenberg&rsquo;</em>. On obtient alors un nouveau DataFrame, mais réduit.</p><div class=highlight><pre style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#75715e># masquer (WHERE)</span>
<span style=color:#111>tableau_filtre</span> <span style=color:#f92672>=</span> <span style=color:#111>tableau2D_df</span><span style=color:#111>[</span><span style=color:#111>tableau2D_df</span><span style=color:#111>[</span><span style=color:#d88200>&#34;titre&#34;</span><span style=color:#111>]</span> <span style=color:#f92672>==</span> <span style=color:#d88200>&#39;Rendez vous à Badenberg&#39;</span><span style=color:#111>]</span>

<span style=color:#111>tableau_filtre</span> <span style=color:#75715e># on affiche le tableau filtré</span></code></pre></div><p><strong>Exemple 2 :</strong> on cherche le complémentaire de l&rsquo;expression precedente : filtrer et renvoyer tous les films DIFFERENTS de *`Rendez vous à Badenberg&rsquo;</p><p>On utilise pour cela le symbole ~ (tild) devant l&rsquo;expression dont on veut le complémentaire :</p><div class=highlight><pre style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#111>tableau_comp</span> <span style=color:#f92672>=</span> <span style=color:#111>tableau2D_df</span><span style=color:#111>[</span><span style=color:#f92672>~</span><span style=color:#111>(</span><span style=color:#111>tableau2D_df</span><span style=color:#111>[</span><span style=color:#d88200>&#34;titre&#34;</span><span style=color:#111>]</span> <span style=color:#f92672>==</span> <span style=color:#d88200>&#39;Rendez vous à Badenberg&#39;</span><span style=color:#111>)]</span>
<span style=color:#111>tableau_comp</span></code></pre></div><p><strong>Exemple 3 :</strong> filtrer par rapport aux dates de réalisation.</p><blockquote><p><strong>Travail :</strong> ecrire l&rsquo;instruction qui renvoie un nouveau DataFrame, mais uniquement avec des films réalisés en 1970</p></blockquote><div class=highlight><pre style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python></code></pre></div><h2 id=trier-le-tableau>trier le tableau</h2><p>On peut vouloir maintenant afficher les films dans l&rsquo;ordre croissant de diffusion dans la journée.
Pour des raisons de commodité, on modifie le format de l&rsquo;heure de diffusion pour que le type de données soit <code>float</code> et non <code>str</code>. Par exemple : &lsquo;18h00&rsquo; =&gt; 18.00</p><div class=highlight><pre style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#111>tableau2D_df</span><span style=color:#111>[</span><span style=color:#d88200>&#39;horaire&#39;</span><span style=color:#111>]</span><span style=color:#f92672>=</span><span style=color:#111>[</span><span style=color:#ae81ff>18</span><span style=color:#111>,</span><span style=color:#ae81ff>15</span><span style=color:#111>,</span><span style=color:#ae81ff>20</span><span style=color:#111>,</span><span style=color:#ae81ff>18.1</span><span style=color:#111>]</span>
<span style=color:#111>tableau2D_df</span> <span style=color:#75715e># on affiche le tableau</span></code></pre></div><p>On peut maintenant trier ce tableau selon l&rsquo;horaire :</p><div class=highlight><pre style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#111>tableau2D_df</span><span style=color:#f92672>.</span><span style=color:#111>sort_values</span><span style=color:#111>(</span><span style=color:#111>by</span> <span style=color:#f92672>=</span><span style=color:#d88200>&#39;horaire&#39;</span><span style=color:#111>)</span></code></pre></div><p>Et voilà, vous n&rsquo;avez plus aucun excuse pour rater une seance ;-)</p><h1 id=traitement-de-données-en-csv>Traitement de données en csv</h1><p>Le fichier joint <code>joueursNBA2020.csv</code> est un extrait des joueurs professionnels de basket de NBA, pour la saison 2019-2020. On va utiliser la librairie pandas pour ouvrir puis explorer ce fichier.</p><div class=highlight><pre style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#75715e>#******************************************#</span>
<span style=color:#75715e>#******************** fichier csv *********#</span>
<span style=color:#75715e>#******************************************#</span>
<span style=color:#111>data</span> <span style=color:#f92672>=</span> <span style=color:#111>pd</span><span style=color:#f92672>.</span><span style=color:#111>read_csv</span><span style=color:#111>(</span><span style=color:#d88200>&#34;datas/joueursNBA2020.csv&#34;</span><span style=color:#111>,</span> <span style=color:#111>sep</span><span style=color:#f92672>=</span><span style=color:#d88200>&#34;;&#34;</span><span style=color:#111>)</span></code></pre></div><div class=highlight><pre style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#111>data</span></code></pre></div><p>Les données recupérées doivent souvent être remises en forme. Le tableau ci-dessus présente plusieurs problèmes qui doivent être traités avant de pouvoir exploiter les données :</p><ul><li>Il y a des colonnes <em>Unnamed</em> qui ne servent à rien : elles seront à supprimer</li><li>Il y a plus de lignes que de joueurs. Ces lignes ont pour valeur <code>NaN</code>. Il faudra aussi les supprimer.</li><li>Le poids des joueurs, dans la colonne &lsquo;poids&rsquo; est exprimé sous format <code>str</code>. Les valeurs sont écrites avec l&rsquo;unité, <em>kg</em>. Il vaudra mieux les tranformer en type <code>float</code>, en retirant les caractères <em>kg</em>.</li></ul><div class=highlight><pre style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python></code></pre></div><div class=highlight><pre style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#75715e>#***************************************#</span>
<span style=color:#75715e># en pratique **************************#</span>
<span style=color:#75715e># selection des colonnes renseignées    #</span>
<span style=color:#75715e># et suppression des lignes NaN         #</span>
<span style=color:#75715e># avec .dropna()                        #</span>
<span style=color:#75715e>#***************************************#</span>
<span style=color:#111>tableau_reduit</span><span style=color:#f92672>=</span><span style=color:#111>data</span><span style=color:#111>[[</span><span style=color:#d88200>&#39;nom&#39;</span><span style=color:#111>,</span><span style=color:#d88200>&#39;equipe&#39;</span><span style=color:#111>,</span><span style=color:#d88200>&#39;poste&#39;</span><span style=color:#111>,</span><span style=color:#d88200>&#39;taille&#39;</span><span style=color:#111>,</span><span style=color:#d88200>&#39;poids&#39;</span><span style=color:#111>,</span><span style=color:#d88200>&#39;experience&#39;</span><span style=color:#111>,</span><span style=color:#d88200>&#39;pays&#39;</span><span style=color:#111>]]</span><span style=color:#f92672>.</span><span style=color:#111>dropna</span><span style=color:#111>()</span></code></pre></div><div class=highlight><pre style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#75715e>#*************************************#</span>
<span style=color:#75715e># puis `cast` de la colonne poids     #</span>
<span style=color:#75715e># les valeurs sont de type str et     #</span>
<span style=color:#75715e># combinent des float avec kg         #</span>
<span style=color:#75715e># par exemple 89.8 kg                 #</span>
<span style=color:#75715e>#*************************************#</span>

<span style=color:#111>tableau_reduit</span><span style=color:#111>[</span><span style=color:#d88200>&#39;poids&#39;</span><span style=color:#111>]</span><span style=color:#f92672>=</span><span style=color:#111>tableau_reduit</span><span style=color:#111>[</span><span style=color:#d88200>&#39;poids&#39;</span><span style=color:#111>]</span><span style=color:#f92672>.</span><span style=color:#111>replace</span><span style=color:#111>(</span><span style=color:#111>to_replace</span> <span style=color:#f92672>=</span><span style=color:#d88200>&#39;kg&#39;</span><span style=color:#111>,</span> <span style=color:#111>value</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#39;&#39;</span><span style=color:#111>,</span> <span style=color:#111>regex</span> <span style=color:#f92672>=</span> <span style=color:#111>True</span><span style=color:#111>)</span> </code></pre></div><div class=highlight><pre style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#75715e>#************************************#</span>
<span style=color:#75715e># puis conversion du type            #</span>
<span style=color:#75715e># str vers float                     #</span>
<span style=color:#75715e># **********CAST ********************#</span>
<span style=color:#75715e>#************************************#</span>

<span style=color:#111>tableau_reduit</span><span style=color:#111>[</span><span style=color:#d88200>&#39;poids&#39;</span><span style=color:#111>]</span><span style=color:#f92672>=</span><span style=color:#111>tableau_reduit</span><span style=color:#111>[</span><span style=color:#d88200>&#39;poids&#39;</span><span style=color:#111>]</span><span style=color:#f92672>.</span><span style=color:#111>astype</span><span style=color:#111>(</span><span style=color:#d88200>&#39;float&#39;</span><span style=color:#111>)</span></code></pre></div><div class=highlight><pre style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#111>tableau_reduit</span><span style=color:#f92672>.</span><span style=color:#111>loc</span><span style=color:#111>[</span><span style=color:#ae81ff>1</span><span style=color:#111>][</span><span style=color:#d88200>&#39;poids&#39;</span><span style=color:#111>]</span></code></pre></div><div class=highlight><pre style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#111>tableau_reduit</span></code></pre></div><p>Et voila, il n&rsquo;y a plus qu&rsquo;à explorer ce tableau de données. On peut par exemple :</p><ul><li>filtrer le tableau pour n&rsquo;afficher que les joueurs du poste &lsquo;C&rsquo;</li><li>filtrer les joueurs pour ne conserver que les joueurs de nationalité autre que americaine.</li><li>Trier les joueurs par taille, ou par poids</li></ul><blockquote><p><strong>Travail :</strong> Testez certaines des propositions faites ici&hellip;</p></blockquote><div class=highlight><pre style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python></code></pre></div><h1 id=liens>Liens</h1><ul><li>Cours sur openclassroom.com : decouvrir la librairie pandas : <a href=https://openclassrooms.com/fr/courses/4452741-decouvrez-les-librairies-python-pour-la-data-science/5558996-passez-de-numpy-a-pandas>https://openclassrooms.com/fr/courses/4452741-decouvrez-les-librairies-python-pour-la-data-science/5558996-passez-de-numpy-a-pandas</a></li><li>kaggle.com presentation des dataframes : <a href=https://www.kaggle.com/arnopub/pandas-pr-sentation-des-dataframe>https://www.kaggle.com/arnopub/pandas-pr-sentation-des-dataframe</a></li><li>documentation officielle : <a href=https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html>https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html</a></li></ul><div class=highlight><pre style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python></code></pre></div></article><div style=height:100px></div></div></main><div class=site_footer><a rel=license href=http://creativecommons.org/licenses/by/4.0/><img alt="Licence Creative Commons" style=border-width:0 src=/creative.png></a>
<span xmlns:dct=http://purl.org/dc/terms/ property=dct:title>Sciences numeriques</span> de <a xmlns:cc=http://creativecommons.org/ns# href property=cc:attributionName rel=cc:attributionurl>numerix.netlify.com</a> est mis à disposition selon les termes de la <a rel=license href=http://creativecommons.org/licenses/by/4.0/>licence Creative Commons Attribution 4.0 International</a></div></body></html>