<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Python algo KNN
| Sciences numériques</title><link href="https://fonts.googleapis.com/css?family=Oxygen|Oxygen+Mono:300,400,700" rel=stylesheet><script type=text/javascript src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><script src=https://cdnjs.cloudflare.com/ajax/libs/prism/1.5.0/prism.min.js></script><script async src="https://www.googletagmanager.com/gtag/js?id=UA-167114468-1"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}
gtag('js',new Date());gtag('config','UA-167114468-1');</script><link rel=stylesheet href=/book.min.692ac0322e0d29b47afd1a1a2dcda6f0c23c4d95c922ccd6c8fe66b0e8841492.css><link rel=icon href=/favicon.png type=image/x-icon><div class=my-header-container><div class=my-site-header><img src=/logo-site-b.svg width="150 px"></div><div id=myHeader><div class=titre><h2><a href=/>Sciences numériques</a></h2></div></div></div><script async>window.onload=function(){let container=document.getElementsByClassName("book-page");let logodiv=document.getElementsByClassName("site-menu-before");let header=document.getElementById("myHeader");let screen=window.innerWidth;let site_footer=document.querySelector(".site_footer");try{let site_TOC=document.querySelector("#TableOfContents>ul");let newP=document.createElement('li');newP.textContent='Contenu de la page';site_TOC.appendChild(newP,null);}
catch(err)
{console.log(err.message);}
if(site_footer.parentNode!=document.body){let father=site_footer.parentNode;let clone=site_footer.cloneNode;father.removeChild(site_footer);document.body.appendChild(clone);}
if(screen<=850){document.getElementsByClassName("my-site-header")[0].style.display="none";}else{window.addEventListener("scroll",function(e){let spectral=document.getElementById("spectral");if(screen>850){if(window.pageYOffset>150){header.classList.add("sticky");if(container.lenght>0){container[0].style.marginTop="65px";};logodiv[0].style.height="120px";}else{header.classList.remove("sticky");if(container.lenght>0){container[0].style.marginTop="0px";};spectral.style.display="none";logodiv[0].style.height="220px";}}
if(screen<=850){if(window.pageYOffset>150){spectral.style.display="block";}else{spectral.style.display="none";}}});}}</script></head><body><input type=checkbox style=display:none id=menu-control><main class="flex container"><aside class="book-menu fixed"><nav role=navigation><div class=site-menu-before style=height:220px;display:block><img src=/logo-site.svg id=spectral height=50% style=display:none></div><style>nav ul a[href$=\2fposts\2fpython\2f algKnn\2f ]{color:#004ed0}</style><ul><li><a href=/><strong>Accueil</strong></a></li><li><a href=/docs/esf/esf_index/><strong>ESF</strong></a></li><li><p><a href=/docs/SNT_2nde/SNT_index/><strong>SNT secondes</strong></a></p></li><li><p><a href=/docs/NSI/NSI_index/><strong>NSI</strong></a></p><ul><li><a href=/docs/NSI/NSI_architecture/>architecture informatique</a></li><li><a href=/docs/NSI/NSI_structure/>structure de données</a></li><li><a href=/docs/NSI/NSI_bases/>bases de données</a></li><li><a href=/docs/NSI/NSI_langages/>langages</a></li><li><a href=/docs/NSI/NSI_algorithmes/>algorithmes</a><br></li></ul></li><li><p><a href=/docs/python/index_python/><strong>Python</strong></a></p></li><li><p><a href=/docs/PC_2nde/PC_index/><strong>Physique Chimie 2nde</strong></a></p><ul><li><a href=/docs/PC_2nde/physique/pages/page1/>physique du mouvement</a></li><li><a href=/docs/PC_2nde/physique/pages/page2/>échanges thermiques</a></li><li><a href=/docs/PC_2nde/chimie/pages/mole/>la mole</a></li><li><a href=/docs/PC_2nde/chimie/pages/transformation/>transformation chimique</a></li><li><a href=/docs/PC_2nde/chimie/pages/avancement/>animation avancement</a></li></ul></li><li><p><a href=/docs/PC_1ere/PC_index/><strong>Physique 1ere Spé</strong></a></p><ul><li><a href=/docs/PC_1ere/energie/energie1/>Energie</a></li><li><a href=/docs/PC_1ere/atome/atome/>modèle de Bohr de l&rsquo;atome</a></li><li><a href=/docs/PC_1ere/notebooks/PC_notebooks/>ipython notebooks</a></li></ul></li><li><p><a href=/posts/><strong>Posts</strong></a></p></li><li><p><a href=/docs/contact/simple-contact-form/><strong>Contact</strong></a></p></li></ul></nav><script>(function(){var menu=document.querySelector('aside.book-menu nav')
addEventListener('beforeunload',function(event){localStorage.setItem('menu.scrollTop',menu.scrollTop)});menu.scrollTop=localStorage.getItem('menu.scrollTop')})()</script></aside><div class=book-posts><header class="align-center justify-between book-header"><label for=menu-control><img src=/svg/menu.svg alt=Menu></label>
<strong>Python algo KNN</strong></header><header class=markdown><h1>Python algo KNN</h1><h5><strong>Sept 1, 1019</strong></h5></header><article class=markdown><h1 id=algorithme-des-k-plus-proches-voisins>Algorithme des k plus proches voisins</h1><h2 id=notebook>notebook</h2><p>Le notebook présenté ici est à télécharger à l&rsquo;adresse suivante :</p><p><a href=https://mybinder.org/v2/gh/tix06/notebook_datas.git/master><img src=https://mybinder.org/badge_logo.svg alt=Binder></a></p><p><a href=https://mybinder.org/v2/gh/tix06/notebook_datas.git/master>https://mybinder.org/v2/gh/tix06/notebook_datas.git/master</a></p><p>Choisir : <code>algoKNN.ipynb</code></p><p>Exercez vous en suivant le tutoriel avec ce notebook.</p><h2 id=principe>Principe</h2><p>On cherche une correspondance entre les <strong>caractéristiques physiques</strong> d&rsquo;un joueur de basket et son <strong>poste</strong> sur le terrain.</p><p>Pour simplifier, on considerera que les postes sont au nombre de trois :</p><ul><li>le joueur Centre, noté <strong>&lsquo;C&rsquo;</strong> (position 5 sur le schéma)</li><li>Le joueur Ailier, noté <strong>&lsquo;F&rsquo;</strong> (positions 3 et 4 sur le schéma)</li><li>Le joueur arrière ou meneur de jeu, noté <strong>&lsquo;G&rsquo;</strong> (positions 1 et 2 sur le schéma)</li></ul><p><img src=https://upload.wikimedia.org/wikipedia/commons/thumb/a/ac/Basketball_Positions.png/220px-Basketball_Positions.png alt="positions sur le terrain"></p><p>Il nous faut, pour rechercher une correspondance, avoir accès à une base de données des joueurs de basket, jouant par exemple dans un même championnat.</p><p>En étudiant cette première population, on va pouvoir prédire quel poste pourrait occuper un nouveau joueur entrant dans ce championnat (qui serait <em>drafté</em>), à partir de ses seules caracteristiques physiques.</p><p>Cette idée est un peu simpliste : le poste occupé sur le parquet ne dépend pas, bien sur des seules caractéristiques physiques, mais aussi des copétences du joueur.</p><p>Mais nous allons chercher dans ce TP si l&rsquo;idée est plutôt cohérente.</p><p>On traite alors un jeu de données bi-dimentionnelles à N classes (où N estle nombre de postes occupés par les joueurs).</p><p>On va pour cela utiliser l&rsquo;algorithme des <em>k-plus-proches-voisins</em>. C&rsquo;est l&rsquo;un des algorithmes les plus utilisés dans le domaine de l&rsquo;<em>apprentissage automatique</em> ou <em>machine learning</em>.</p><p>Comme pour tous les types d&rsquo;apprentissage automatique, le principe est le suivant :</p><ul><li><p>on commence par étudier une population donnée, dite d&rsquo;<em>entrainement</em>. La qualité d&rsquo;échantillonnage utilisé pour cette population va déterminer la bonne prédiction par cet algorithme. L&rsquo;étude de cette population doit permettre de créer des ensembles d&rsquo;objets aux propriétés similaires. Par exemple, l&rsquo;ensemble constitué des joueurs de type <em>Centre</em> seront probablement plus <em>grands</em> et plus <em>forts</em> que les autres joueurs.</p></li><li><p>On dispose ensuite d&rsquo;une population exterieure à cet échantillonnage. On cherche à prevoir leur position sur le terrain par rapport à leurs caractéristiques physiques, d&rsquo;après les résultats de l&rsquo;étude préalable.</p></li></ul><h2 id=la-ligue-de-basket-nba>La ligue de basket NBA</h2><p>Les données sont issues de la page : [<a href=https://fr.global.nba.com/playerindex/](https://fr.global.nba.com/playerindex/]>https://fr.global.nba.com/playerindex/](https://fr.global.nba.com/playerindex/]</a></p><figure><img src=../datas/extraitNBA.png width=80% alt="tableau joueurs NBA"><figcaption>extrait du tableau des joueurs de NBA</figcaption></figure><p>La ligue de basket americaine contient environ 400 joueurs professionnels. La plupart de nationalité américaine. On dispose d&rsquo;un extrait de ce fichier (voir dans le dossier <code>datas</code>), constitué de 57 joueurs, classés par ordre alphabetique.</p><h1 id=chargement-du-fichier-base-de-données>Chargement du fichier base de données</h1><h2 id=python-librairies-numpy-et-pandas>Python : librairies numpy et pandas</h2><p>Le traitement des données se fera en langage <em>Python</em>.</p><p>On commence par charger les librairies utiles pour le traitement de ces données. Puis on transforme celles-ci en un DataFrame, une sorte de tableau à 2 entrées. Les valeurs de taille et de poids sont toutes de type <code>float</code> après ce premier traitement.</p><div class=highlight><pre style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#f92672>import</span> <span style=color:#111>numpy</span> <span style=color:#f92672>as</span> <span style=color:#111>np</span>
<span style=color:#f92672>import</span> <span style=color:#111>pandas</span> <span style=color:#f92672>as</span> <span style=color:#111>pd</span>
<span style=color:#111>data</span> <span style=color:#f92672>=</span> <span style=color:#111>pd</span><span style=color:#f92672>.</span><span style=color:#111>read_csv</span><span style=color:#111>(</span><span style=color:#d88200>&#34;datas/joueursNBA2020.csv&#34;</span><span style=color:#111>,</span> <span style=color:#111>sep</span><span style=color:#f92672>=</span><span style=color:#d88200>&#34;;&#34;</span><span style=color:#111>)</span>
<span style=color:#111>tableau_reduit</span><span style=color:#f92672>=</span><span style=color:#111>data</span><span style=color:#111>[[</span><span style=color:#d88200>&#39;nom&#39;</span><span style=color:#111>,</span><span style=color:#d88200>&#39;equipe&#39;</span><span style=color:#111>,</span><span style=color:#d88200>&#39;poste&#39;</span><span style=color:#111>,</span><span style=color:#d88200>&#39;taille&#39;</span><span style=color:#111>,</span><span style=color:#d88200>&#39;poids&#39;</span><span style=color:#111>,</span><span style=color:#d88200>&#39;experience&#39;</span><span style=color:#111>,</span><span style=color:#d88200>&#39;pays&#39;</span><span style=color:#111>]]</span><span style=color:#f92672>.</span><span style=color:#111>dropna</span><span style=color:#111>()</span>
<span style=color:#111>tableau_reduit</span><span style=color:#111>[</span><span style=color:#d88200>&#39;poids&#39;</span><span style=color:#111>]</span><span style=color:#f92672>=</span><span style=color:#111>tableau_reduit</span><span style=color:#111>[</span><span style=color:#d88200>&#39;poids&#39;</span><span style=color:#111>]</span><span style=color:#f92672>.</span><span style=color:#111>replace</span><span style=color:#111>(</span><span style=color:#111>to_replace</span> <span style=color:#f92672>=</span><span style=color:#d88200>&#39;kg&#39;</span><span style=color:#111>,</span> <span style=color:#111>value</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#39;&#39;</span><span style=color:#111>,</span> <span style=color:#111>regex</span> <span style=color:#f92672>=</span> <span style=color:#111>True</span><span style=color:#111>)</span>
<span style=color:#111>tableau_reduit</span><span style=color:#111>[</span><span style=color:#d88200>&#39;poids&#39;</span><span style=color:#111>]</span><span style=color:#f92672>=</span><span style=color:#111>tableau_reduit</span><span style=color:#111>[</span><span style=color:#d88200>&#39;poids&#39;</span><span style=color:#111>]</span><span style=color:#f92672>.</span><span style=color:#111>astype</span><span style=color:#111>(</span><span style=color:#d88200>&#39;float&#39;</span><span style=color:#111>)</span>
<span style=color:#111>tableau_reduit</span><span style=color:#111>[</span><span style=color:#d88200>&#39;taille&#39;</span><span style=color:#111>]</span><span style=color:#f92672>=</span><span style=color:#111>tableau_reduit</span><span style=color:#111>[</span><span style=color:#d88200>&#39;taille&#39;</span><span style=color:#111>]</span><span style=color:#f92672>.</span><span style=color:#111>astype</span><span style=color:#111>(</span><span style=color:#d88200>&#39;float&#39;</span><span style=color:#111>)</span></code></pre></div><div class=highlight><pre style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#111>tableau_reduit</span><span style=color:#f92672>.</span><span style=color:#111>head</span><span style=color:#111>()</span> <span style=color:#75715e># on affiche le debut du tableau avec la fonction .head()</span></code></pre></div><h2 id=filtrer-les-données-du-dataframe>Filtrer les données du DataFrame</h2><p>On peut maintenant filtrer les joueurs du tableau selon le poste du joueur.
On utilise pour cela la fonction <code>.loc</code> associée au DataFrame. On met en paramètre un predicat qui sera testé pour chacun des objets du DataFrame. Seuls les objets au prédicat <code>true</code> sont conservés :</p><blockquote><p><code>ensemble = tableau_reduit.loc[tableau_reduit['poste']=='C']</code></p><p><strong>Question :</strong> Dans cet exemple : A quel poste jouent les joueurs conservés dans le DataFrame <code>ensemble</code>? Vérifiez le dans la console&hellip;</p></blockquote><div class=highlight><pre style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python></code></pre></div><h2 id=afficher-les-joueurs-sur-un-graphique-taille-poids>Afficher les joueurs sur un graphique taille-poids</h2><p>On créé une fonction <code>points</code> qui ajoute le nuage de points pour chacun des éléments de la liste <code>postes</code> mise en paramètre. On créé un nuage de points de couleur et d&rsquo;étiquette différent pour chaque poste occupé.</p><p>Les paramètres de cette fonction :</p><ul><li>postes : on peut y mettre le caractère correspondant au poste comme &lsquo;G&rsquo;, &lsquo;F&rsquo;, ou &lsquo;C&rsquo;. On peut aussi y mettre une liste constituée de certains, ou tous les postes.</li><li>Les autres paramètres sont optionnels : il s&rsquo;agit de la taille et de la forme du marqueur, et de la transparence.</li></ul><div class=highlight><pre style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#f92672>import</span> <span style=color:#111>matplotlib.pyplot</span> <span style=color:#f92672>as</span> <span style=color:#111>plt</span>
<span style=color:#f92672>from</span> <span style=color:#111>matplotlib.patches</span> <span style=color:#f92672>import</span> <span style=color:#111>Ellipse</span><span style=color:#111>,</span> <span style=color:#111>Circle</span> 

<span style=color:#00a8c8>def</span> <span style=color:#75af00>points</span><span style=color:#111>(</span><span style=color:#111>postes</span><span style=color:#111>,</span><span style=color:#111>size</span><span style=color:#f92672>=</span><span style=color:#ae81ff>20</span><span style=color:#111>,</span><span style=color:#111>marker</span><span style=color:#f92672>=</span><span style=color:#d88200>&#39;o&#39;</span><span style=color:#111>,</span><span style=color:#111>alpha</span><span style=color:#f92672>=</span><span style=color:#ae81ff>0.5</span><span style=color:#111>):</span>
    <span style=color:#d88200>&#34;&#34;&#34;
</span><span style=color:#d88200>    fonction qui ajoute des points au graphique existant
</span><span style=color:#d88200>    
</span><span style=color:#d88200>    Le paramètres :
</span><span style=color:#d88200>    * postes peut être une liste de postes comme par exemple [&#39;G&#39;,&#39;F&#39;,&#39;C&#39;]
</span><span style=color:#d88200>    ou bien un seul poste, comme par exemple &#39;C&#39;
</span><span style=color:#d88200>    * les autres paramètres sont optionnels
</span><span style=color:#d88200>    &#34;&#34;&#34;</span>
    <span style=color:#00a8c8>for</span> <span style=color:#111>poste</span> <span style=color:#f92672>in</span> <span style=color:#111>postes</span><span style=color:#111>:</span>
        <span style=color:#111>ensemble</span> <span style=color:#f92672>=</span> <span style=color:#111>tableau_reduit</span><span style=color:#f92672>.</span><span style=color:#111>loc</span><span style=color:#111>[</span><span style=color:#111>tableau_reduit</span><span style=color:#111>[</span><span style=color:#d88200>&#39;poste&#39;</span><span style=color:#111>]</span><span style=color:#f92672>==</span><span style=color:#111>poste</span><span style=color:#111>]</span>
        <span style=color:#111>x</span><span style=color:#f92672>=</span><span style=color:#111>ensemble</span><span style=color:#111>[</span><span style=color:#d88200>&#39;taille&#39;</span><span style=color:#111>]</span>
        <span style=color:#111>y</span><span style=color:#f92672>=</span><span style=color:#111>ensemble</span><span style=color:#111>[</span><span style=color:#d88200>&#39;poids&#39;</span><span style=color:#111>]</span>
        <span style=color:#111>plt</span><span style=color:#f92672>.</span><span style=color:#111>scatter</span><span style=color:#111>(</span><span style=color:#111>x</span><span style=color:#111>,</span><span style=color:#111>y</span><span style=color:#111>,</span><span style=color:#111>label</span><span style=color:#f92672>=</span><span style=color:#111>poste</span><span style=color:#111>,</span> <span style=color:#111>s</span><span style=color:#f92672>=</span><span style=color:#111>size</span><span style=color:#111>,</span> <span style=color:#111>marker</span><span style=color:#f92672>=</span><span style=color:#111>marker</span><span style=color:#111>,</span> <span style=color:#111>alpha</span><span style=color:#f92672>=</span><span style=color:#111>alpha</span><span style=color:#111>)</span></code></pre></div><p>Avec les lignes suivantes, on affiche sur un même graphique les joueurs du tableau jouant aux postes &lsquo;G&rsquo;, &lsquo;F&rsquo;, &lsquo;C&rsquo;.</p><p>Les joueurs du poste &lsquo;C&rsquo; sont mis en relief avec un marqueur plus gros.</p><blockquote><p><strong>Question :</strong> Repérez à quel endroit se regroupent les joueurs &lsquo;C&rsquo;&hellip;</p></blockquote><div class=highlight><pre style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#111>plt</span><span style=color:#f92672>.</span><span style=color:#111>title</span><span style=color:#111>(</span><span style=color:#d88200>&#39;caractéristiques des joueurs de NBA 2020&#39;</span><span style=color:#111>)</span>
<span style=color:#111>plt</span><span style=color:#f92672>.</span><span style=color:#111>xlabel</span><span style=color:#111>(</span><span style=color:#d88200>&#34;taille&#34;</span><span style=color:#111>)</span>
<span style=color:#111>plt</span><span style=color:#f92672>.</span><span style=color:#111>ylabel</span><span style=color:#111>(</span><span style=color:#d88200>&#34;poids&#34;</span><span style=color:#111>)</span>
<span style=color:#111>plt</span><span style=color:#f92672>.</span><span style=color:#111>grid</span><span style=color:#111>(</span><span style=color:#111>which</span><span style=color:#f92672>=</span><span style=color:#d88200>&#39;major&#39;</span><span style=color:#111>,</span> <span style=color:#111>linestyle</span><span style=color:#f92672>=</span><span style=color:#d88200>&#39;-&#39;</span><span style=color:#111>,</span> <span style=color:#111>linewidth</span><span style=color:#f92672>=</span><span style=color:#d88200>&#39;0.5&#39;</span><span style=color:#111>,</span> <span style=color:#111>color</span><span style=color:#f92672>=</span><span style=color:#d88200>&#39;red&#39;</span><span style=color:#111>)</span>
<span style=color:#111>points</span><span style=color:#111>([</span><span style=color:#d88200>&#39;F&#39;</span><span style=color:#111>,</span><span style=color:#d88200>&#39;G&#39;</span><span style=color:#111>])</span>

<span style=color:#111>points</span><span style=color:#111>(</span><span style=color:#d88200>&#39;C&#39;</span><span style=color:#111>,</span><span style=color:#ae81ff>100</span><span style=color:#111>,</span><span style=color:#d88200>&#39;D&#39;</span><span style=color:#111>,</span><span style=color:#ae81ff>1</span><span style=color:#111>)</span>
<span style=color:#111>axes</span> <span style=color:#f92672>=</span> <span style=color:#111>plt</span><span style=color:#f92672>.</span><span style=color:#111>gca</span><span style=color:#111>()</span>
<span style=color:#111>plt</span><span style=color:#f92672>.</span><span style=color:#111>legend</span><span style=color:#111>()</span>
<span style=color:#111>plt</span><span style=color:#f92672>.</span><span style=color:#111>savefig</span><span style=color:#111>(</span><span style=color:#d88200>&#39;datas/centre.png&#39;</span><span style=color:#111>)</span>
<span style=color:#111>plt</span><span style=color:#f92672>.</span><span style=color:#111>show</span><span style=color:#111>()</span></code></pre></div><p><img src=../images/centre.png alt="joueurs au poste 'C' dans la population NBA"></p><div class=highlight><pre style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python></code></pre></div><blockquote><p><strong>Travail :</strong> Utilisez la fonction <code>points</code> pour représenter les 3 ensembles &lsquo;C&rsquo;, &lsquo;F&rsquo; et &lsquo;G&rsquo;. Mais cette fois, on veut mettre en relief :</p><ul><li>les joueurs &lsquo;F&rsquo; dans un 2e graphique</li><li>Puis mettre en relief les joueurs &lsquo;G&rsquo; dans un 3e graphique.</li></ul></blockquote><div class=highlight><pre style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#75715e># Correction</span>
<span style=color:#111>plt</span><span style=color:#f92672>.</span><span style=color:#111>title</span><span style=color:#111>(</span><span style=color:#d88200>&#39;caractéristiques des joueurs de NBA 2020&#39;</span><span style=color:#111>)</span>
<span style=color:#111>plt</span><span style=color:#f92672>.</span><span style=color:#111>xlabel</span><span style=color:#111>(</span><span style=color:#d88200>&#34;taille&#34;</span><span style=color:#111>)</span>
<span style=color:#111>plt</span><span style=color:#f92672>.</span><span style=color:#111>ylabel</span><span style=color:#111>(</span><span style=color:#d88200>&#34;poids&#34;</span><span style=color:#111>)</span>
<span style=color:#111>plt</span><span style=color:#f92672>.</span><span style=color:#111>grid</span><span style=color:#111>(</span><span style=color:#111>which</span><span style=color:#f92672>=</span><span style=color:#d88200>&#39;major&#39;</span><span style=color:#111>,</span> <span style=color:#111>linestyle</span><span style=color:#f92672>=</span><span style=color:#d88200>&#39;-&#39;</span><span style=color:#111>,</span> <span style=color:#111>linewidth</span><span style=color:#f92672>=</span><span style=color:#d88200>&#39;0.5&#39;</span><span style=color:#111>,</span> <span style=color:#111>color</span><span style=color:#f92672>=</span><span style=color:#d88200>&#39;red&#39;</span><span style=color:#111>)</span>
<span style=color:#111>points</span><span style=color:#111>([</span><span style=color:#d88200>&#39;G&#39;</span><span style=color:#111>,</span><span style=color:#d88200>&#39;C&#39;</span><span style=color:#111>])</span>

<span style=color:#111>points</span><span style=color:#111>(</span><span style=color:#d88200>&#39;F&#39;</span><span style=color:#111>,</span><span style=color:#ae81ff>100</span><span style=color:#111>,</span><span style=color:#d88200>&#39;D&#39;</span><span style=color:#111>,</span><span style=color:#ae81ff>1</span><span style=color:#111>)</span>
<span style=color:#111>axes</span> <span style=color:#f92672>=</span> <span style=color:#111>plt</span><span style=color:#f92672>.</span><span style=color:#111>gca</span><span style=color:#111>()</span>
<span style=color:#111>plt</span><span style=color:#f92672>.</span><span style=color:#111>legend</span><span style=color:#111>()</span>
<span style=color:#111>plt</span><span style=color:#f92672>.</span><span style=color:#111>savefig</span><span style=color:#111>(</span><span style=color:#d88200>&#39;datas/ailier.png&#39;</span><span style=color:#111>)</span>
<span style=color:#111>plt</span><span style=color:#f92672>.</span><span style=color:#111>show</span><span style=color:#111>()</span></code></pre></div><p><img src=../images/ailier.png alt="joueurs au poste 'F' dans la population NBA"></p><div class=highlight><pre style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#75715e># Correction</span>
<span style=color:#111>plt</span><span style=color:#f92672>.</span><span style=color:#111>title</span><span style=color:#111>(</span><span style=color:#d88200>&#39;caractéristiques des joueurs de NBA 2020&#39;</span><span style=color:#111>)</span>
<span style=color:#111>plt</span><span style=color:#f92672>.</span><span style=color:#111>xlabel</span><span style=color:#111>(</span><span style=color:#d88200>&#34;taille&#34;</span><span style=color:#111>)</span>
<span style=color:#111>plt</span><span style=color:#f92672>.</span><span style=color:#111>ylabel</span><span style=color:#111>(</span><span style=color:#d88200>&#34;poids&#34;</span><span style=color:#111>)</span>
<span style=color:#111>plt</span><span style=color:#f92672>.</span><span style=color:#111>grid</span><span style=color:#111>(</span><span style=color:#111>which</span><span style=color:#f92672>=</span><span style=color:#d88200>&#39;major&#39;</span><span style=color:#111>,</span> <span style=color:#111>linestyle</span><span style=color:#f92672>=</span><span style=color:#d88200>&#39;-&#39;</span><span style=color:#111>,</span> <span style=color:#111>linewidth</span><span style=color:#f92672>=</span><span style=color:#d88200>&#39;0.5&#39;</span><span style=color:#111>,</span> <span style=color:#111>color</span><span style=color:#f92672>=</span><span style=color:#d88200>&#39;red&#39;</span><span style=color:#111>)</span>
<span style=color:#111>points</span><span style=color:#111>([</span><span style=color:#d88200>&#39;F&#39;</span><span style=color:#111>,</span><span style=color:#d88200>&#39;C&#39;</span><span style=color:#111>])</span>

<span style=color:#111>points</span><span style=color:#111>(</span><span style=color:#d88200>&#39;G&#39;</span><span style=color:#111>,</span><span style=color:#ae81ff>100</span><span style=color:#111>,</span><span style=color:#d88200>&#39;D&#39;</span><span style=color:#111>,</span><span style=color:#ae81ff>0.5</span><span style=color:#111>)</span>
<span style=color:#111>axes</span> <span style=color:#f92672>=</span> <span style=color:#111>plt</span><span style=color:#f92672>.</span><span style=color:#111>gca</span><span style=color:#111>()</span>
<span style=color:#111>plt</span><span style=color:#f92672>.</span><span style=color:#111>legend</span><span style=color:#111>()</span>
<span style=color:#111>plt</span><span style=color:#f92672>.</span><span style=color:#111>savefig</span><span style=color:#111>(</span><span style=color:#d88200>&#39;datas/arriere.png&#39;</span><span style=color:#111>)</span>
<span style=color:#111>plt</span><span style=color:#f92672>.</span><span style=color:#111>show</span><span style=color:#111>()</span></code></pre></div><p><img src=../images/arriere.png alt="joueurs au poste 'G' dans la population NBA"></p><h1 id=prediction-du-poste-du-joueur>Prediction du poste du joueur</h1><h2 id=population-dont-le-poste-est-inconnu>population dont le poste est inconnu</h2><p>Certains joueurs ont des caractéristiques qui les rendent plus polyvalents.</p><blockquote><p><strong>Question :</strong> En observant le tableau_reduit en entier : Quels sont ces postes polyvalents ?</p></blockquote><p>Ces joueurs n&rsquo;ont été mis sur aucun des graphiques d&rsquo;apprentissage vus plus haut. Et si vous utilisiez un algorithme prédictif pour deviner le meilleur poste auquel ils devraient être ?
Nous allons étudier en détail cet algorithme, des k plus proches voisins&hellip;</p><p>Prenons par exemple les joueurs polyvalents à l&rsquo;étiquette &ldquo;G-F&rdquo;. Ces joueurs, sont-ils plutôt pressentis pour être G (arrière), ou F (ailier) ?</p><p>C&rsquo;est ce que nous allons chercher à déterminer.</p><blockquote><p><strong>Travail :</strong> en utilisant la méthode <code>.loc</code> associée au DataFrame <code>tableau_reduit</code> : filtrer les joueurs dont le poste est &lsquo;G-F&rsquo;, et affecter ce nouveau DataFrame à la variable <code>ensemble</code>
Afficher alors ce nouveau tableau</p></blockquote><div class=highlight><pre style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#75715e># Correction</span>
<span style=color:#111>ensemble</span> <span style=color:#f92672>=</span> <span style=color:#111>tableau_reduit</span><span style=color:#f92672>.</span><span style=color:#111>loc</span><span style=color:#111>[</span><span style=color:#111>tableau_reduit</span><span style=color:#111>[</span><span style=color:#d88200>&#39;poste&#39;</span><span style=color:#111>]</span><span style=color:#f92672>==</span><span style=color:#d88200>&#39;G-F&#39;</span><span style=color:#111>]</span>
<span style=color:#111>ensemble</span></code></pre></div><h2 id=choisir-un-joueur>Choisir un joueur</h2><blockquote><p><strong>Travail :</strong> Repérer le numéro de l&rsquo;index du premier joueur au poste &lsquo;G-F&rsquo; dans ce tableau. Afficher l&rsquo;ensemble des informations relatives à ce joueur à l&rsquo;aide de l&rsquo;instruction <code>ensemble.loc[numero index]</code></p></blockquote><div class=highlight><pre style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#75715e># Correction</span>
<span style=color:#111>ensemble</span><span style=color:#f92672>.</span><span style=color:#111>loc</span><span style=color:#111>[</span><span style=color:#ae81ff>9</span><span style=color:#111>]</span></code></pre></div><h2 id=utiliser-la-fonction-joueur-pour-l-afficher-sur-le-graphique>Utiliser la fonction <em>joueur()</em> pour l&rsquo;afficher sur le graphique</h2><p>Affichons un marqueur pour ce joueur au milieu de la distribution <em>d&rsquo;entrainement</em>.
Pour cela, on utilise une fonction de nom <code>joueur()</code> dont les paramètres sont les suivants :</p><ul><li>num : le numero de l&rsquo;index du joueur dans le tableau</li><li>rayon : le rayon du cercle dans lequel on recherche les k-plus proches voisins. Ce rayon est mesuré dans une unité relative au poids du joueur. L&rsquo;echelle de l&rsquo;axe des abscisses, la taille étant très différente, on réalise un calcul prenant en compte le ration DX/DY pour exprimer l&rsquo;éloignement dans cette direction (un ecart de 10kg n&rsquo;a pas la même signification qu&rsquo;un écart de 10cm&hellip;)</li></ul><div class=highlight><pre style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#00a8c8>def</span> <span style=color:#75af00>joueur</span><span style=color:#111>(</span><span style=color:#111>num</span><span style=color:#111>,</span> <span style=color:#111>rayon</span><span style=color:#111>):</span>
    <span style=color:#d88200>&#34;&#34;&#34;
</span><span style=color:#d88200>    positionne le point relatif au joueur de numero num
</span><span style=color:#d88200>    et trace un cercle de rayon r exprimé dans une unité relative à l&#39;axe des Y
</span><span style=color:#d88200>    Le demi axe de l&#39;ellipse pour X est calculé par rapport au ratio = DX/DY : 
</span><span style=color:#d88200>    r_X = r_y*ratio
</span><span style=color:#d88200>    &#34;&#34;&#34;</span>
    <span style=color:#111>ratio</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0.005</span> <span style=color:#75715e># echelle des X / echelle des Y</span>
    <span style=color:#111>plt</span><span style=color:#f92672>.</span><span style=color:#111>title</span><span style=color:#111>(</span><span style=color:#d88200>&#39;caractéristiques des joueurs de NBA 2020&#39;</span><span style=color:#111>)</span>
    <span style=color:#111>plt</span><span style=color:#f92672>.</span><span style=color:#111>xlabel</span><span style=color:#111>(</span><span style=color:#d88200>&#34;taille&#34;</span><span style=color:#111>)</span>
    <span style=color:#111>plt</span><span style=color:#f92672>.</span><span style=color:#111>ylabel</span><span style=color:#111>(</span><span style=color:#d88200>&#34;poids&#34;</span><span style=color:#111>)</span>
    <span style=color:#111>plt</span><span style=color:#f92672>.</span><span style=color:#111>grid</span><span style=color:#111>(</span><span style=color:#111>which</span><span style=color:#f92672>=</span><span style=color:#d88200>&#39;major&#39;</span><span style=color:#111>,</span> <span style=color:#111>linestyle</span><span style=color:#f92672>=</span><span style=color:#d88200>&#39;-&#39;</span><span style=color:#111>,</span> <span style=color:#111>linewidth</span><span style=color:#f92672>=</span><span style=color:#d88200>&#39;0.5&#39;</span><span style=color:#111>,</span> <span style=color:#111>color</span><span style=color:#f92672>=</span><span style=color:#d88200>&#39;red&#39;</span><span style=color:#111>)</span>
    <span style=color:#111>points</span><span style=color:#111>([</span><span style=color:#d88200>&#39;F&#39;</span><span style=color:#111>,</span><span style=color:#d88200>&#39;G&#39;</span><span style=color:#111>,</span><span style=color:#d88200>&#39;C&#39;</span><span style=color:#111>])</span>
    <span style=color:#111>x</span> <span style=color:#f92672>=</span> <span style=color:#111>ensemble</span><span style=color:#f92672>.</span><span style=color:#111>loc</span><span style=color:#111>[</span><span style=color:#111>num</span><span style=color:#111>][</span><span style=color:#d88200>&#39;taille&#39;</span><span style=color:#111>]</span>
    <span style=color:#111>y</span> <span style=color:#f92672>=</span> <span style=color:#111>ensemble</span><span style=color:#f92672>.</span><span style=color:#111>loc</span><span style=color:#111>[</span><span style=color:#111>num</span><span style=color:#111>][</span><span style=color:#d88200>&#39;poids&#39;</span><span style=color:#111>]</span>
    <span style=color:#111>plt</span><span style=color:#f92672>.</span><span style=color:#111>scatter</span><span style=color:#111>(</span><span style=color:#111>x</span><span style=color:#111>,</span><span style=color:#111>y</span><span style=color:#111>,</span><span style=color:#111>label</span><span style=color:#f92672>=</span><span style=color:#111>poste</span><span style=color:#111>,</span> <span style=color:#111>s</span><span style=color:#f92672>=</span><span style=color:#ae81ff>50</span><span style=color:#111>,</span> <span style=color:#111>marker</span><span style=color:#f92672>=</span><span style=color:#d88200>&#39;P&#39;</span><span style=color:#111>,</span> <span style=color:#111>alpha</span><span style=color:#f92672>=</span><span style=color:#ae81ff>1</span><span style=color:#111>)</span>
    <span style=color:#111>circle</span> <span style=color:#f92672>=</span> <span style=color:#111>plt</span><span style=color:#f92672>.</span><span style=color:#111>Circle</span><span style=color:#111>((</span><span style=color:#111>x</span><span style=color:#111>,</span> <span style=color:#111>y</span><span style=color:#111>),</span> <span style=color:#ae81ff>1</span><span style=color:#111>,</span> <span style=color:#111>color</span><span style=color:#f92672>=</span><span style=color:#d88200>&#39;r&#39;</span><span style=color:#111>)</span>
    <span style=color:#111>fig</span> <span style=color:#f92672>=</span> <span style=color:#111>plt</span><span style=color:#f92672>.</span><span style=color:#111>gcf</span><span style=color:#111>()</span>  <span style=color:#75715e># gcf() signifie obtenir le chiffre actuel</span>
    <span style=color:#111>ax</span> <span style=color:#f92672>=</span> <span style=color:#111>fig</span><span style=color:#f92672>.</span><span style=color:#111>gca</span><span style=color:#111>()</span>  <span style=color:#75715e># gca() signifie Obtenir l&#39;axe actuel</span>
    <span style=color:#111>ax</span><span style=color:#f92672>.</span><span style=color:#111>set_aspect</span><span style=color:#111>(</span><span style=color:#111>ratio</span><span style=color:#111>)</span>  <span style=color:#75715e># je choisi le ratio DX/DY pour les echelles des axes</span>
    <span style=color:#111>ax</span><span style=color:#f92672>.</span><span style=color:#111>add_artist</span><span style=color:#111>(</span><span style=color:#111>Ellipse</span><span style=color:#111>((</span><span style=color:#111>x</span><span style=color:#111>,</span> <span style=color:#111>y</span><span style=color:#111>),</span> <span style=color:#111>rayon</span><span style=color:#f92672>*</span><span style=color:#111>ratio</span><span style=color:#111>,</span> <span style=color:#111>rayon</span><span style=color:#111>,</span> <span style=color:#111>color</span><span style=color:#f92672>=</span><span style=color:#d88200>&#39;yellow&#39;</span><span style=color:#111>,</span><span style=color:#111>alpha</span><span style=color:#f92672>=</span><span style=color:#ae81ff>0.2</span><span style=color:#111>))</span>
    <span style=color:#111>plt</span><span style=color:#f92672>.</span><span style=color:#111>legend</span><span style=color:#111>()</span>
    <span style=color:#111>plt</span><span style=color:#f92672>.</span><span style=color:#111>savefig</span><span style=color:#111>(</span><span style=color:#d88200>&#39;datas/joueur&#39;</span><span style=color:#f92672>+</span><span style=color:#111>str</span><span style=color:#111>(</span><span style=color:#111>num</span><span style=color:#111>)</span><span style=color:#f92672>+</span><span style=color:#d88200>&#39;.png&#39;</span><span style=color:#111>)</span>
    <span style=color:#111>plt</span><span style=color:#f92672>.</span><span style=color:#111>show</span><span style=color:#111>()</span></code></pre></div><h2 id=afficher-le-joueur-sur-le-graphique>Afficher le joueur sur le graphique</h2><blockquote><p><strong>Travail :</strong> utiliser la fonction <code>joueur()</code> pour afficher un marqueur pour ce joueur. On prendra un rayon égal à 20 pour le paramètre <em>rayon</em>.</p></blockquote><div class=highlight><pre style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#75715e># correction</span>
<span style=color:#111>joueur</span><span style=color:#111>(</span><span style=color:#ae81ff>9</span><span style=color:#111>,</span><span style=color:#ae81ff>20</span><span style=color:#111>)</span></code></pre></div><p><img src=../images/joueur9.png alt="joueurs n°9 dans la population NBA"></p><h2 id=l-algorithme-des-k-plus-proches-voisins>L&rsquo;algorithme des k-plus proches voisins</h2><p>L&rsquo;algorithme des k-plus proches voisins peut s&rsquo;écrire en langage naturel :</p><p>1) trouver dans la collection d&rsquo;entrainement les k plus proches voisins du joueur
2) Parmi ces proches voisins, trouver la classification majoritaire
3) Renvoyer la classification majoritaire</p><blockquote><p>Travail : Commencez par fabriquer un DataFrame <code>ensembleG</code> contenant tous les joueurs au poste &lsquo;G&rsquo;.</p><p>Puis, avec cette même methode, construire les DataFrame <code>ensembleF</code> et <code>ensembleC</code></p></blockquote><div class=highlight><pre style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#75715e># Correction</span>
<span style=color:#111>ensembleG</span> <span style=color:#f92672>=</span> <span style=color:#111>tableau_reduit</span><span style=color:#f92672>.</span><span style=color:#111>loc</span><span style=color:#111>[</span><span style=color:#111>tableau_reduit</span><span style=color:#111>[</span><span style=color:#d88200>&#39;poste&#39;</span><span style=color:#111>]</span><span style=color:#f92672>==</span><span style=color:#d88200>&#39;G&#39;</span><span style=color:#111>]</span>
<span style=color:#111>ensembleF</span> <span style=color:#f92672>=</span> <span style=color:#111>tableau_reduit</span><span style=color:#f92672>.</span><span style=color:#111>loc</span><span style=color:#111>[</span><span style=color:#111>tableau_reduit</span><span style=color:#111>[</span><span style=color:#d88200>&#39;poste&#39;</span><span style=color:#111>]</span><span style=color:#f92672>==</span><span style=color:#d88200>&#39;F&#39;</span><span style=color:#111>]</span>
<span style=color:#111>ensembleC</span> <span style=color:#f92672>=</span> <span style=color:#111>tableau_reduit</span><span style=color:#f92672>.</span><span style=color:#111>loc</span><span style=color:#111>[</span><span style=color:#111>tableau_reduit</span><span style=color:#111>[</span><span style=color:#d88200>&#39;poste&#39;</span><span style=color:#111>]</span><span style=color:#f92672>==</span><span style=color:#d88200>&#39;C&#39;</span><span style=color:#111>]</span></code></pre></div><blockquote><p>Enfin, construire un DataFrame <code>ensemble</code> qui sera réalisé par concaténation des 3 premiers.</p><p>Afficher les premieres lignes de ce DataFrame (avec la fonction <code>.head()</code></p><p>Aide sur la fonction concat : <code>ensemble = pd.concat([DataFrame1,DataFrame2,DataFrame3])</code></p></blockquote><div class=highlight><pre style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#75715e># Correction</span>
<span style=color:#111>ensemble</span> <span style=color:#f92672>=</span> <span style=color:#111>pd</span><span style=color:#f92672>.</span><span style=color:#111>concat</span><span style=color:#111>([</span><span style=color:#111>ensembleG</span><span style=color:#111>,</span><span style=color:#111>ensembleF</span><span style=color:#111>,</span><span style=color:#111>ensembleC</span><span style=color:#111>])</span>
<span style=color:#111>ensemble</span><span style=color:#f92672>.</span><span style=color:#111>head</span><span style=color:#111>()</span></code></pre></div><p>Puis ajoutons une nouvelle colonne avec la <em>distance</em> au joueur de numero <code>num</code> dans le graphique :</p><div class=highlight><pre style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#00a8c8>def</span> <span style=color:#75af00>distance</span><span style=color:#111>(</span><span style=color:#111>num</span><span style=color:#111>,</span><span style=color:#111>ratio</span><span style=color:#111>):</span>
    <span style=color:#111>x</span> <span style=color:#f92672>=</span> <span style=color:#111>tableau_reduit</span><span style=color:#f92672>.</span><span style=color:#111>loc</span><span style=color:#111>[</span><span style=color:#111>num</span><span style=color:#111>][</span><span style=color:#d88200>&#39;taille&#39;</span><span style=color:#111>]</span>
    <span style=color:#111>y</span> <span style=color:#f92672>=</span> <span style=color:#111>tableau_reduit</span><span style=color:#f92672>.</span><span style=color:#111>loc</span><span style=color:#111>[</span><span style=color:#111>num</span><span style=color:#111>][</span><span style=color:#d88200>&#39;poids&#39;</span><span style=color:#111>]</span>
    <span style=color:#111>ensemble</span><span style=color:#111>[</span><span style=color:#d88200>&#39;dist&#39;</span><span style=color:#111>]</span> <span style=color:#f92672>=</span> <span style=color:#111>ensemble</span><span style=color:#f92672>.</span><span style=color:#111>apply</span><span style=color:#111>(</span><span style=color:#00a8c8>lambda</span> <span style=color:#111>row</span><span style=color:#111>:</span> <span style=color:#111>(((</span><span style=color:#111>row</span><span style=color:#111>[</span><span style=color:#d88200>&#34;taille&#34;</span><span style=color:#111>]</span> <span style=color:#f92672>-</span> <span style=color:#111>x</span><span style=color:#111>)</span><span style=color:#f92672>/</span><span style=color:#111>ratio</span><span style=color:#111>)</span><span style=color:#f92672>**</span><span style=color:#ae81ff>2</span> <span style=color:#f92672>+</span> <span style=color:#111>(</span><span style=color:#111>row</span><span style=color:#111>[</span><span style=color:#d88200>&#34;poids&#34;</span><span style=color:#111>]</span> <span style=color:#f92672>-</span> <span style=color:#111>y</span><span style=color:#111>)</span><span style=color:#f92672>**</span><span style=color:#ae81ff>2</span><span style=color:#111>)</span><span style=color:#f92672>**</span><span style=color:#ae81ff>0.5</span><span style=color:#111>,</span> <span style=color:#111>axis</span><span style=color:#f92672>=</span><span style=color:#ae81ff>1</span><span style=color:#111>)</span>
    <span style=color:#75715e># On trie le tableau par valeur dist croissante</span>
    <span style=color:#111>ensemble_trie</span> <span style=color:#f92672>=</span> <span style=color:#111>ensemble</span><span style=color:#f92672>.</span><span style=color:#111>sort_values</span><span style=color:#111>(</span><span style=color:#111>by</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#39;dist&#39;</span><span style=color:#111>)</span>
    <span style=color:#00a8c8>return</span> <span style=color:#111>ensemble_trie</span></code></pre></div><div class=highlight><pre style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#111>ensemble_trie</span> <span style=color:#f92672>=</span> <span style=color:#111>distance</span><span style=color:#111>(</span><span style=color:#ae81ff>9</span><span style=color:#111>,</span><span style=color:#ae81ff>0.005</span><span style=color:#111>)</span></code></pre></div><div class=highlight><pre style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#111>ensemble_trie</span></code></pre></div><h2 id=trier-les-résultats>Trier les résultats</h2><p>On voudrait maintenant dénombrer, par poste, les joueurs aux caractéristiques les plus proches de notre joueur au poste inconnu. Sur un echantillon des k premiers joueurs du tableau précédent.</p><blockquote><p><strong>Travail :</strong> Créer une fonction knn(k) qui renvoie un dictionnaire <code>score</code> avec pour chacune des clés, &lsquo;G&rsquo;, &lsquo;F&rsquo;, et &lsquo;G&rsquo;, le nombre de joueurs du tableau parmi les k premiers.</p></blockquote><div class=highlight><pre style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#75715e># Correction</span>
<span style=color:#00a8c8>def</span> <span style=color:#75af00>knn</span><span style=color:#111>(</span><span style=color:#111>k</span><span style=color:#111>):</span>
    <span style=color:#111>score</span><span style=color:#f92672>=</span><span style=color:#111>{</span><span style=color:#d88200>&#39;G&#39;</span><span style=color:#111>:</span><span style=color:#ae81ff>0</span><span style=color:#111>,</span><span style=color:#d88200>&#39;F&#39;</span><span style=color:#111>:</span><span style=color:#ae81ff>0</span><span style=color:#111>,</span><span style=color:#d88200>&#39;C&#39;</span><span style=color:#111>:</span><span style=color:#ae81ff>0</span><span style=color:#111>}</span>
    <span style=color:#00a8c8>for</span> <span style=color:#111>i</span> <span style=color:#f92672>in</span> <span style=color:#111>range</span><span style=color:#111>(</span><span style=color:#111>k</span><span style=color:#111>):</span>
        <span style=color:#111>z</span><span style=color:#f92672>=</span><span style=color:#111>ensemble_trie</span><span style=color:#f92672>.</span><span style=color:#111>index</span><span style=color:#111>[</span><span style=color:#111>i</span><span style=color:#111>]</span>
        <span style=color:#00a8c8>if</span> <span style=color:#111>ensemble_trie</span><span style=color:#f92672>.</span><span style=color:#111>loc</span><span style=color:#111>[</span><span style=color:#111>z</span><span style=color:#111>][</span><span style=color:#d88200>&#39;poste&#39;</span><span style=color:#111>]</span><span style=color:#f92672>==</span><span style=color:#d88200>&#39;G&#39;</span> <span style=color:#111>:</span> 
            <span style=color:#111>score</span><span style=color:#111>[</span><span style=color:#d88200>&#39;G&#39;</span><span style=color:#111>]</span><span style=color:#f92672>+=</span><span style=color:#ae81ff>1</span>
        <span style=color:#00a8c8>elif</span> <span style=color:#111>ensemble_trie</span><span style=color:#f92672>.</span><span style=color:#111>loc</span><span style=color:#111>[</span><span style=color:#111>z</span><span style=color:#111>][</span><span style=color:#d88200>&#39;poste&#39;</span><span style=color:#111>]</span><span style=color:#f92672>==</span><span style=color:#d88200>&#39;F&#39;</span> <span style=color:#111>:</span>
            <span style=color:#111>score</span><span style=color:#111>[</span><span style=color:#d88200>&#39;F&#39;</span><span style=color:#111>]</span><span style=color:#f92672>+=</span><span style=color:#ae81ff>1</span>  
        <span style=color:#00a8c8>else</span> <span style=color:#111>:</span> <span style=color:#111>score</span><span style=color:#111>[</span><span style=color:#d88200>&#39;C&#39;</span><span style=color:#111>]</span><span style=color:#f92672>+=</span><span style=color:#ae81ff>1</span>
    <span style=color:#00a8c8>return</span> <span style=color:#111>score</span>  </code></pre></div><p>On peut afficher les 3 premiers joueurs du tableau trié, avec l&rsquo;une des méthodes associée au DataFrame :</p><p><code>DataFrame.head(nombre de lignes à afficher)</code></p><div class=highlight><pre style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#111>ensemble_trie</span><span style=color:#f92672>.</span><span style=color:#111>head</span><span style=color:#111>(</span><span style=color:#ae81ff>3</span><span style=color:#111>)</span></code></pre></div><div class=highlight><pre style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#111>knn</span><span style=color:#111>(</span><span style=color:#ae81ff>3</span><span style=color:#111>)</span></code></pre></div><blockquote><p><strong>Travail :</strong> Ecrire une fonction qui renvoie le poste le plus représenté selon la valeur de k choisie. Faites alors quelques essais. Conclure quand à la pertinence du résultat selon la valeur de k choisie.</p></blockquote><div class=highlight><pre style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python></code></pre></div><h2 id=prolongement>Prolongement</h2><p>On peut réaliser ce même travail : pour rechercher les k plus proches voisins :</p><ul><li>d&rsquo;un autre joueur au profil &lsquo;G-F&rsquo;</li><li>pour un joueur d&rsquo;un autre profil, comme par exemple &lsquo;F-G&rsquo;</li></ul><div class=highlight><pre style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python></code></pre></div><h1 id=liens>Liens</h1><ul><li>TP du site infoforall.fr avec des joueurs de football : <a href=https://www.infoforall.fr/act/algo/k-plus-proches-voisins>https://www.infoforall.fr/act/algo/k-plus-proches-voisins</a></li><li>TP du site Lyceum.fr sur la prevision d&rsquo;une mention au conseil de classe : <a href=https://lyceum.fr/1g/nsi/8-algorithmique/3-algorithme-des-k-plus-proches-voisins>https://lyceum.fr/1g/nsi/8-algorithmique/3-algorithme-des-k-plus-proches-voisins</a></li><li>Cours sur pixees.fr: <a href=https://pixees.fr/informatiquelycee/n_site/nsi_prem_knn.html>https://pixees.fr/informatiquelycee/n_site/nsi_prem_knn.html</a></li><li>Article Wikipedia: <a href=https://fr.wikipedia.org/wiki/M%C3%A9thode_des_k_plus_proches_voisins>https://fr.wikipedia.org/wiki/M%C3%A9thode_des_k_plus_proches_voisins</a></li></ul><div class=highlight><pre style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python></code></pre></div></article><div style=height:100px></div></div></main><div class=site_footer><a rel=license href=http://creativecommons.org/licenses/by/4.0/><img alt="Licence Creative Commons" style=border-width:0 src=/creative.png></a>
<span xmlns:dct=http://purl.org/dc/terms/ property=dct:title>Sciences numeriques</span> de <a xmlns:cc=http://creativecommons.org/ns# href property=cc:attributionName rel=cc:attributionurl>numerix.netlify.com</a> est mis à disposition selon les termes de la <a rel=license href=http://creativecommons.org/licenses/by/4.0/>licence Creative Commons Attribution 4.0 International</a></div></body></html>